(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{458:function(s,t,a){"use strict";a.r(t);var n=a(26),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"组件通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件通信"}},[s._v("#")]),s._v(" 组件通信"),a("badge",{attrs:{text:"特别重要",type:"error"}})],1),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[a("code",[s._v("props / $emit")]),s._v(" 适用 父子组件通信")])])]),s._v(" "),a("li",[a("p",[a("strong",[a("code",[s._v("ref")]),s._v(" 适用 父子组件通信")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("ref")]),s._v("：如果在普通的 "),a("code",[s._v("DOM")]),s._v(" 元素上使用，引用指向的就是 "),a("code",[s._v("DOM")]),s._v(" 元素；如果用在子组件上，引用就指向组件实例")])])]),s._v(" "),a("li",[a("p",[a("strong",[a("code",[s._v("$parent")]),s._v(" / "),a("code",[s._v("$children")]),s._v(" / "),a("code",[s._v("$root")]),s._v("：访问父 / 子实例 / 根实例")])])]),s._v(" "),a("li",[a("p",[a("strong",[a("code",[s._v("EventBus （$emit / $on）")]),s._v(" 适用于 父子、隔代、兄弟组件通信")])]),s._v(" "),a("ul",[a("li",[s._v("这种方法通过一个空的 "),a("code",[s._v("Vue")]),s._v(" 实例作为中央事件总线（事件中心），用它来触发事件和监听事件，从而实现任何组件间的通信，包括父子、隔代、兄弟组件。")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 实现")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建一个中央时间总线类  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bus")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("callbacks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 存放事件的名字  ")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("callbacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("callbacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("callbacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("$emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("callbacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("callbacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("cb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// main.js  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$bus "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将$bus挂载到vue实例的原型上  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 另一种方式  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$bus "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Vue已经实现了Bus的功能")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Children1.vue")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$bus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("$emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Children2.vue")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$bus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("handle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[a("code",[s._v("$attrs")]),s._v("/"),a("code",[s._v("$listeners")]),s._v(" 适用于 隔代组件通信")])])])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("$attrs")]),s._v("：包含了父作用域中不被 "),a("code",[s._v("prop")]),s._v(" 所识别 (且获取) 的特性绑定 ( "),a("code",[s._v("class")]),s._v(" 和 "),a("code",[s._v("style")]),s._v(" 除外 )。当一个组件没有声明任何 "),a("code",[s._v("prop")]),s._v(" 时，这里会包含所有父作用域的绑定 ( "),a("code",[s._v("class")]),s._v(" 和 "),a("code",[s._v("style")]),s._v(" 除外 )，并且可以通过 "),a("code",[s._v('v-bind="$attrs"')]),s._v(" 传入内部组件。通常配合 "),a("code",[s._v("inheritAttrs")]),s._v(" 选项一起使用。")]),s._v(" "),a("li",[a("code",[s._v("$listeners")]),s._v("：包含了父作用域中的 (不含 "),a("code",[s._v(".native")]),s._v(" 修饰器的) "),a("code",[s._v("v-on")]),s._v(" 事件监听器。它可以通过 "),a("code",[s._v('v-on="$listeners"')]),s._v(" 传入内部组件")])]),s._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[a("p",[a("strong",[a("code",[s._v("provide / inject")]),s._v(" 适用于 隔代组件通信")])]),s._v(" "),a("ul",[a("li",[s._v("祖先组件中通过 "),a("code",[s._v("provide")]),s._v(" 来提供变量，然后在子孙组件中通过 "),a("code",[s._v("inject")]),s._v(" 来注入变量。"),a("code",[s._v("provide / inject API")]),s._v(" 主要解决了跨级组件间的通信问题，不过它的使用场景，主要是子组件获取上级组件的状态，跨级组件间建立了一种主动提供与依赖注入的关系。")])])]),s._v(" "),a("li",[a("p",[a("strong",[a("code",[s._v("Vuex")]),s._v(" 适用于 父子、隔代、兄弟组件通信")])]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("Vuex")]),s._v(" 是一个专为 "),a("code",[s._v("Vue.js")]),s._v(" 应用程序开发的状态管理模式。每一个 "),a("code",[s._v("Vuex")]),s._v(" 应用的核心就是 "),a("code",[s._v("store")]),s._v("（仓库）。"),a("code",[s._v("store")]),s._v(" 基本上就是一个容器，它包含着你的应用中大部分的状态 ( "),a("code",[s._v("state")]),s._v(" )。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("Vuex")]),s._v(" 的状态存储是响应式的。当 "),a("code",[s._v("Vue")]),s._v(" 组件从 "),a("code",[s._v("store")]),s._v(" 中读取状态的时候，若 "),a("code",[s._v("store")]),s._v(" 中的状态发生变化，那么相应的组件也会相应地得到高效更新。")])]),s._v(" "),a("li",[a("p",[s._v("改变 "),a("code",[s._v("store")]),s._v(" 中的状态的唯一途径就是显式地提交 "),a("code",[s._v("(commit) mutation")]),s._v("。这样使得我们可以方便地跟踪每一个状态的变化。")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("插槽")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("Vue3")]),s._v(" 可以通过 "),a("code",[s._v("useslot")]),s._v(" 获取插槽数据。")])])]),s._v(" "),a("li",[a("p",[a("strong",[a("code",[s._v("mitt.js")]),s._v(" 适用于任意组件通信")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("Vue3")]),s._v(" 中移除了 "),a("code",[s._v("$on")]),s._v("，"),a("code",[s._v("$off")]),s._v("等方法，所以 "),a("code",[s._v("EventBus")]),s._v(" 不再使用，相应的替换方案就是 "),a("code",[s._v("mitt.js")])])])])]),s._v(" "),a("h2",{attrs:{id:"attrs是为了解决什么问题出现的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#attrs是为了解决什么问题出现的"}},[s._v("#")]),s._v(" "),a("code",[s._v("$attrs")]),s._v("是为了解决什么问题出现的？")]),s._v(" "),a("p",[s._v("主要作用是为了实现批量传递数据。")]),s._v(" "),a("p",[a("code",[s._v("provide/inject")]),s._v("更适合应用在插件中，主要实现跨级数据传递")])])}),[],!1,null,null,null);t.default=e.exports}}]);