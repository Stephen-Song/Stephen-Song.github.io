---
title: 数组的方法
date: 2021-11-28 10:20:39
permalink: /pages/8f7042/
---

# 数组方法

## 数组中改变自身的方法

> 基于 ES6，会改变自身值的方法一共有 `9` 个，分别为 `pop、push、reverse、shift、sort、splice、unshift，以及两个 ES6 新增的方法 copyWithin 和 fill`

```javascript
// pop方法
var array = ["cat", "dog", "cow", "chicken", "mouse"];
var item = array.pop();
console.log(array); // ["cat", "dog", "cow", "chicken"]
console.log(item); // mouse
// push方法
var array = ["football", "basketball",  "badminton"];
var i = array.push("golfball");
console.log(array); 
// ["football", "basketball", "badminton", "golfball"]
console.log(i); // 4
// reverse方法
var array = [1,2,3,4,5];
var array2 = array.reverse();
console.log(array); // [5,4,3,2,1]
console.log(array2===array); // true
// shift方法
var array = [1,2,3,4,5];
var item = array.shift();
console.log(array); // [2,3,4,5]
console.log(item); // 1
// unshift方法
var array = ["red", "green", "blue"];
var length = array.unshift("yellow");
console.log(array); // ["yellow", "red", "green", "blue"]
console.log(length); // 4
// sort方法
var array = ["apple","Boy","Cat","dog"];
var array2 = array.sort();
console.log(array); // ["Boy", "Cat", "apple", "dog"]
console.log(array2 == array); // true
// splice方法
var array = ["apple","boy"];
var splices = array.splice(1,1);
console.log(array); // ["apple"]
console.log(splices); // ["boy"]
// copyWithin方法
var array = [1,2,3,4,5]; 
var array2 = array.copyWithin(0,3);
console.log(array===array2,array2);  // true [4, 5, 3, 4, 5]
// fill方法
var array = [1,2,3,4,5];
var array2 = array.fill(10,0,3);
console.log(array===array2,array2); 
// true [10, 10, 10, 4, 5], 可见数组区间[0,3]的元素全部替换为10
```

## 数组中不改变自身的方法

```js
// concat方法
var array = [1, 2, 3];
var array2 = array.concat(4,[5,6],[7,8,9]);
console.log(array2); // [1, 2, 3, 4, 5, 6, 7, 8, 9]
console.log(array); // [1, 2, 3], 可见原数组并未被修改
// join方法
var array = ['We', 'are', 'Chinese'];
console.log(array.join()); // "We,are,Chinese"
console.log(array.join('+')); // "We+are+Chinese"
// slice方法
var array = ["one", "two", "three","four", "five"];
console.log(array.slice()); // ["one", "two", "three","four", "five"]
console.log(array.slice(2,3)); // ["three"]
// toString方法
var array = ['Jan', 'Feb', 'Mar', 'Apr'];
var str = array.toString();
console.log(str); // Jan,Feb,Mar,Apr
// tolocalString方法
var array= [{name:'zz'}, 123, "abc", new Date()];
var str = array.toLocaleString();
console.log(str); // [object Object],123,abc,2016/1/5 下午1:06:23
// indexOf方法
var array = ['abc', 'def', 'ghi','123'];
console.log(array.indexOf('def')); // 1
// includes方法
var array = [-0, 1, 2];
console.log(array.includes(+0)); // true
console.log(array.includes(1)); // true
var array = [NaN];
console.log(array.includes(NaN)); // true
```

## 数组扁平化

>递归

```javascript
function flatten(arr) {
  let result = [];
  for (let i = 0; i < arr.length; i++) {
    if (Array.isArray(arr[i])) {
      result = result.concat(flatten(arr[i]));
    } else {
      result.push(arr[i]);
    }
  }
  return result;
}

let arr = [1, [2, [3, 4, 5]]];
console.log(flatten(arr));
```

>迭代

```javascript
function flatten(arr) {
  return arr.reduce((prev, next) => {
    return prev.concat(Array.isArray(next) ? flatten(next) : next);
  }, []);
}

let arr = [1, [2, [3, 4, 5]]];
console.log(flatten(arr));
```

>扩展操作符

```javascript
function flatten(arr) {
  while (arr.some((item) => Array.isArray(item))) {
    arr = [].concat(...arr);
  }
  return arr;
}

let arr = [1, [2, [3, 4, 5]]];
console.log(flatten(arr));
```

>`split`和`toString`

```javascript
function flatten(arr) {
  return arr.toString().split(",");
}

let arr = [1, [2, [3, 4, 5]]];
console.log(flatten(arr));
// [ '1', '2', '3', '4', '5' ]
// 有个缺点是全转成字符串
```

>`es6`的`flat`

```javascript
let arr = [1, [2, [3, 4]]];
function flatten(arr) {
  return arr.flat(Infinity);
}
```

## 数组去重

用`Set`数据结构

```javascript
const array = [1, 2, 3, 5, 1, 5, 9, 1, 2, 8];

Array.from(new Set(array)); // [1, 2, 3, 5, 9, 8]
```

利用`map`

```javascript
function uniqueArray(arr) {
  let map = new Map();
  let res = [];
  for (let i = 0; i < arr.length; i++) {
    if (!map.get(arr[i])) {
      res.push(arr[i]);
      map.set(arr[i], true);
    }
  }
  return res;
}

const arr = [1, 2, 3, 5, 1, 5, 9, 1, 2, 8];
console.log(uniqueArray(arr));
// [ 1, 2, 3, 5, 9, 8 ]
```

## `flat`

```javascript
function flat(arr, depth) {
  if (!arr || depth <= 0) {
    return arr;
  }
  return arr.reduce((prev, next) => {
    return prev.concat(Array.isArray(next) ? flat(next) : next);
  }, []);
}

let arr = [1, [2, [3, 4, 5]]];
console.log(flat(arr));
```

## `push`

```javascript
let arr = [];
Array.prototype._push = function() {
	for(let i = 0 ; i < arguments.length ; i++){
		this[this.length] = arguments[i] ;
	}
	return this.length;
}
```

## `filter`

```javascript
Array.prototype._filter = function(fn) {
	if(typeof fn !== 'function') {
  	console.error('typeError)
  }
  const res = []
  for(let i = 0; i < this.length; i++) {
  	fn(this[i]) && res.push(this[i])
  }
  return res
}	
```

## `map`

```javascript
Array.prototype._map = function (cb, context) {
  const arr = Array.prototype.slice.call(this);
  const res = [];
  for (let i = 0; i < arr.length; i++) {
    res.push(cb.call(context, arr[i], i, this));
  }
  return res;
};
```

## 求数组的交集、差集、并集、补集

```js
const a = [1, 2, 3, 4, 5];
const b = [2, 4, 6, 8, 10];
//交集
const c = a.filter((v) => b.indexOf(v) > -1);

//差集
const d = a.filter((v) => b.indexOf(v) == -1);

//补集
const e = a
  .filter((v) => b.indexOf(v) === -1)
  .concat(b.filter((v) => a.indexOf(v) === -1));

//并集
const f = a.concat(b.filter((v) => a.indexOf(v) === -1));
```

