---
title: 正则表达式相关
date: 2021-11-28 10:22:06
permalink: /pages/4ce1a8/
---
# 正则表达式相关手写

## 将数字每千分位用逗号隔开

```javascript
var string1 = "12345678",
string2 = "123456789";
reg = /(?!^)(?=(\d{3})+$)/g;

var result = string1.replace(reg, ',')
console.log(result); 
// => "12,345,678"

result = string2.replace(reg, ',');
console.log(result); 
// => "123,456,789"
```

## 匹配十六进制颜色

表示一个16进制字符，可以用字符组`[0-9a-fA-F]`。

其中字符可以出现3或6次，需要是用量词和分支结构

```javascript
const reg = /#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})/g;

var string = "#ffbbad #Fc01DF #FFF #ffE";
console.log(string.match(reg));
// [ '#ffbbad', '#Fc01DF', '#FFF', '#ffE' ]
```

## 匹配时间

匹配23:59 02:07 7:9

```javascript
const regex = /^(0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[1-5][0-9])$/;

console.log(regex.test("23:59"));
console.log(regex.test("02:07"));
console.log(regex.test("7:9"));
```

## 匹配`dom`节点的`id`

要求从

<div id="container" class="main"></div>

提取出`id="container"`

```javascript
const regex = /id=".*?"/;
const str = '<div id="container" class="main"></div>';
console.log(str.match(regex));
// 或者

var regex = /id="[^"]*"/;
const str = '<div id="container" class="main"></div>';
console.log(str.match(regex));
```

## 验证密码

密码长度6-12位，由数字、小写字符和大写字母组成，但必须至少包括2种字符。

```javascript
var reg = /((?=.*[0-9])(?=.*[a-z])|(?=.*[0-9])(?=.*[A-Z])|(?=.*[a-z])(?=.*[A-Z]))^[0-9A-Za-z]{6,12}$/;
console.log( reg.test("1234567") ); // false 全是数字
console.log( reg.test("abcdef") ); // false 全是小写字母
console.log( reg.test("ABCDEFGH") ); // false 全是大写字母
console.log( reg.test("ab23C") ); // false 不足6位
console.log( reg.test("ABCDEF234") ); // true 大写字母和数字
console.log( reg.test("abcdEF234") ); // true 三者都有
```

或者使用`?!p`

```javascript
// 不能只出现数字 和 不能只出现小写字母和不能只出现大写字母
var reg = /(?!^[0-9]{6,12}$)(?!^[a-z]{6,12}$)(?!^[A-Z]{6,12}$)^[0-9A-Za-z]{6,12}$/;
console.log( reg.test("1234567") ); // false 全是数字
console.log( reg.test("abcdef") ); // false 全是小写字母
console.log( reg.test("ABCDEFGH") ); // false 全是大写字母
console.log( reg.test("ab23C") ); // false 不足6位
console.log( reg.test("ABCDEF234") ); // true 大写字母和数字
console.log( reg.test("abcdEF234") ); // true 三者都有
```

## 模拟`trim`方法

```javascript
function trim(str) {
	return str.replace(/^\s+|\s+$/g, '');
}
console.log( trim("  foobar   ") ); 
// => "foobar"
```

## 将每个单词的首字母大写

`?:`是非捕获分组

>看栗子

```javascript
var regex = /(?:ab)+/g;
var string = "ababa abbb ababab";
console.log( string.match(regex) ); 
// => ["abab", "ab", "ababab"]
function titleize(str) {
	return str.toLowerCase().replace(/(?:^|\s)\w/g, function(c) {
		return c.toUpperCase();
	});
}
console.log( titleize('my name is epeli') ); 
// => "My Name Is Epeli"
```

## 驼峰化

```javascript
function camelize(str) {
	return str.replace(/[-_\s]+(.)?/g, function(match, c) {
		return c ? c.toUpperCase() : '';
	});
}
console.log( camelize('-moz-transform') ); 
// => "MozTransform"
```
