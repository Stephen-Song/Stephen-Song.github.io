(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{462:function(t,e,s){"use strict";s.r(e);var a=s(26),v=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vuex"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuex"}},[t._v("#")]),t._v(" Vuex")]),t._v(" "),s("h2",{attrs:{id:"介绍一下vuex的工作原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍一下vuex的工作原理"}},[t._v("#")]),t._v(" 介绍一下"),s("code",[t._v("Vuex")]),t._v("的工作原理"),s("badge",{attrs:{text:"特别重要",type:"error"}})],1),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/202111281936912.webp",alt:"img"}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("组件触发("),s("code",[t._v("dispatch")]),t._v(")一些事件或动作，就是"),s("code",[t._v("action")])])]),t._v(" "),s("li",[s("p",[t._v("数据不能直接修改，要把这个动作提交("),s("code",[t._v("commit")]),t._v(")给"),s("code",[t._v("mutations")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("mutation")]),t._v("去改变"),s("code",[t._v("state")]),t._v("的数据")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("state")]),t._v("被改变会重新"),s("code",[t._v("render")])])])]),t._v(" "),s("h2",{attrs:{id:"vuex中action和mutation的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuex中action和mutation的区别"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vuex")]),t._v("中"),s("code",[t._v("action")]),t._v("和"),s("code",[t._v("mutation")]),t._v("的区别"),s("badge",{attrs:{text:"特别重要",type:"error"}})],1),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("mutation")]),t._v("专注于修改"),s("code",[t._v("state")]),t._v(" 理论是修改"),s("code",[t._v("state")]),t._v("的唯一途径，"),s("code",[t._v("action")]),t._v("进行业务处理和异步请求")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("mutation")]),t._v("必须同步执行 而"),s("code",[t._v("action")]),t._v("可以异步但不能直接操作"),s("code",[t._v("state")])])]),t._v(" "),s("li",[s("p",[t._v("在视图更新时，先触发"),s("code",[t._v("actions")]),t._v("，"),s("code",[t._v("actions")]),t._v("再触发"),s("code",[t._v("mutation")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("mutation")]),t._v("的参数是"),s("code",[t._v("state")]),t._v("，它包含"),s("code",[t._v("store")]),t._v("中的数据；"),s("code",[t._v("actions")]),t._v("的参数是"),s("code",[t._v("context")]),t._v("，它是 "),s("code",[t._v("state")]),t._v(" 的父级，包含 "),s("code",[t._v("state")]),t._v("、"),s("code",[t._v("getters")])])])]),t._v(" "),s("h2",{attrs:{id:"vuex和localstorge的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuex和localstorge的区别"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vuex")]),t._v("和"),s("code",[t._v("localStorge")]),t._v("的区别"),s("badge",{attrs:{text:"特别重要",type:"error"}})],1),t._v(" "),s("ul",[s("li",[s("p",[t._v("存储形式不同："),s("code",[t._v("vuex")]),t._v("存储在内存，而"),s("code",[t._v("localstorge")]),t._v("以文件形式存储在本地，只能存储字符串("),s("code",[t._v("JSON.stringify")]),t._v("和"),s("code",[t._v("parse")]),t._v("处理过的)，读取内存比读取硬盘的速度快")])]),t._v(" "),s("li",[s("p",[t._v("应用场景不同："),s("code",[t._v("vuex")]),t._v("存储管理应用的所有组件状态，用于组件之间的传值，而"),s("code",[t._v("localstorge")]),t._v("将数据存储到浏览器，一般用于跨页面传输数据，"),s("code",[t._v("vuex")]),t._v("可以做到数据响应式，而"),s("code",[t._v("localstorge")]),t._v("不能")])]),t._v(" "),s("li",[s("p",[t._v("永久性：刷新页面时"),s("code",[t._v("vuex")]),t._v("存储的值会丢失，但"),s("code",[t._v("localstorge")]),t._v("不会")])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("替换")]),t._v(" "),s("p",[t._v("理论上"),s("code",[t._v("localstorge")]),t._v("可以代替"),s("code",[t._v("vuex")]),t._v("，当两个组件共用数据源时，如果一个组件改变了该数据源，而利用"),s("code",[t._v("localstorge")]),t._v("存储的数据做不到响应式，原因还是得益于"),s("code",[t._v("vue")]),t._v("中的"),s("code",[t._v("mvvm")]),t._v("的双向绑定")])]),t._v(" "),s("h2",{attrs:{id:"redux和vuex的区别和共同思想"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redux和vuex的区别和共同思想"}},[t._v("#")]),t._v(" "),s("code",[t._v("Redux")]),t._v("和"),s("code",[t._v("vuex")]),t._v("的区别和共同思想")]),t._v(" "),s("p",[t._v("区别："),s("code",[t._v("vuex")]),t._v("弱化了"),s("code",[t._v("dispatch")]),t._v("，通过"),s("code",[t._v("commit")]),t._v("进行"),s("code",[t._v("store")]),t._v("的状态变更，不用传入"),s("code",[t._v("action")]),t._v("形式进行指定变更；弱化了"),s("code",[t._v("reducer")]),t._v("，基于"),s("code",[t._v("commit")]),t._v("参数直接对数据进行转变")]),t._v(" "),s("p",[t._v("共同思想：都是单一数据源，都是基于"),s("code",[t._v("mvvm")]),t._v("思想，将视图和数据分离，形式上"),s("code",[t._v("vuex")]),t._v("借鉴了"),s("code",[t._v("redux")]),t._v("，将"),s("code",[t._v("store")]),t._v("作为全局的数据中心，进行"),s("code",[t._v("mode")]),t._v("管理")]),t._v(" "),s("h2",{attrs:{id:"vuex和单纯全局对象有什么区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuex和单纯全局对象有什么区别"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vuex")]),t._v("和单纯全局对象有什么区别")]),t._v(" "),s("p",[s("code",[t._v("vuex")]),t._v("状态存储是响应式的，当"),s("code",[t._v("vue")]),t._v("组件从"),s("code",[t._v("store")]),t._v("读取状态，若"),s("code",[t._v("store")]),t._v("中状态改变，相应的组件得到更新")]),t._v(" "),s("p",[t._v("不能直接改变"),s("code",[t._v("store")]),t._v("的状态，改变"),s("code",[t._v("store")]),t._v("唯一途径是提交"),s("code",[t._v("mutation")]),t._v("，可以方便跟踪每一个状态的变化")]),t._v(" "),s("h2",{attrs:{id:"vuex-页面刷新数据丢失怎么解决"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuex-页面刷新数据丢失怎么解决"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vuex")]),t._v(" 页面刷新数据丢失怎么解决")]),t._v(" "),s("ol",[s("li",[t._v("在 "),s("code",[t._v("created")]),t._v(" 周期中读取 "),s("code",[t._v("sessionstorage")]),t._v(" 中的数据存储在 "),s("code",[t._v("store")]),t._v(" 中，此时用 "),s("code",[t._v("vuex.store")]),t._v(" 的 "),s("code",[t._v("replaceState")]),t._v(" 方法，替换 "),s("code",[t._v("store")]),t._v(" 的根状态")]),t._v(" "),s("li",[t._v("在 "),s("code",[t._v("beforeunload")]),t._v(" 方法中将 "),s("code",[t._v("store.state")]),t._v(" 存储到 "),s("code",[t._v("sessionstorage")]),t._v(" 中。")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在页面加载时读取sessionStorage里的状态信息")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"store"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replaceState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"store"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在页面刷新时将vuex里的信息保存到sessionStorage里")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beforeunload"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"store"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h2",{attrs:{id:"为什么vuex的mutation不能做异步操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么vuex的mutation不能做异步操作"}},[t._v("#")]),t._v(" 为什么"),s("code",[t._v("Vuex")]),t._v("的"),s("code",[t._v("mutation")]),t._v("不能做异步操作"),s("badge",{attrs:{text:"重要",type:"warning"}})],1),t._v(" "),s("p",[t._v("因为"),s("code",[t._v("vuex")]),t._v("所有状态更新唯一途径都是"),s("code",[t._v("mutation")]),t._v("，异步操作通过"),s("code",[t._v("action")]),t._v("提交"),s("code",[t._v("mutation")]),t._v("实现，方便跟踪每一个状态的变化，如果"),s("code",[t._v("mutation")]),t._v("支持异步，就没有办法知道状态是何时更新的，给调试带来困难")]),t._v(" "),s("h2",{attrs:{id:"为什么在组件中用this-store-xxx可以访问到vuex的数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么在组件中用this-store-xxx可以访问到vuex的数据"}},[t._v("#")]),t._v(" 为什么在组件中用"),s("code",[t._v("this.$store.xxx")]),t._v("可以访问到"),s("code",[t._v("Vuex")]),t._v("的数据")]),t._v(" "),s("p",[t._v("因为"),s("code",[t._v("Vue")]),t._v("将 "),s("code",[t._v("$store")]),t._v(" 挂载到实例上：\n"),s("code",[t._v("Vue.js")]),t._v("提供了"),s("code",[t._v("Vue.use()")]),t._v("方法用来给"),s("code",[t._v("Vue.js")]),t._v("安装插件")]),t._v(" "),s("p",[t._v("当调用"),s("code",[t._v("Vue.use(Vuex)")]),t._v("时，内部通过调用"),s("code",[t._v("Vuex")]),t._v("插件的"),s("code",[t._v("install")]),t._v("方法来进行插件的初始化。\n"),s("code",[t._v("install")]),t._v("方法执行"),s("code",[t._v("applyMixin")]),t._v("执行初始化"),s("code",[t._v("Vuex")]),t._v("的方法，也就是"),s("code",[t._v("vuexInit")]),t._v("，同时将该方法混淆进"),s("code",[t._v("Vue")]),t._v("的"),s("code",[t._v("beforeCreate(Vue2.0)")]),t._v("或"),s("code",[t._v("_init")]),t._v("方法"),s("code",[t._v("(Vue1.0)")]),t._v("中。")]),t._v(" "),s("h2",{attrs:{id:"vuex是如何实现数据响应式的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuex是如何实现数据响应式的"}},[t._v("#")]),t._v(" "),s("code",[t._v("Vuex")]),t._v("是如何实现数据响应式的？")]),t._v(" "),s("p",[t._v("用一个 "),s("code",[t._v("resetStoreVM")]),t._v(" 方法初始化 "),s("code",[t._v("store")]),t._v(" 的 "),s("code",[t._v("vm（store_vm）")]),t._v("。")]),t._v(" "),s("p",[t._v("将所有"),s("code",[t._v("getter")]),t._v("放入"),s("code",[t._v("computed")]),t._v("对象，以便后续在 "),s("code",[t._v("Vue")]),t._v(" 实例中将它们注册为 "),s("code",[t._v("computed")]),t._v("。\n同时通过"),s("code",[t._v("Object.defineProperty")]),t._v("为每一个"),s("code",[t._v("getter")]),t._v("设置"),s("code",[t._v("get")]),t._v("方法，那么我们在组件里访问"),s("code",[t._v("store")]),t._v("的"),s("code",[t._v("getter")]),t._v("上的数据就相当于访问"),s("code",[t._v("store._vm")]),t._v("上的数据，也就是"),s("code",[t._v("Vue")]),t._v("对象的"),s("code",[t._v("computed")]),t._v("属性。")]),t._v(" "),s("p",[t._v("完成后，让"),s("code",[t._v("store._vm")]),t._v("指向一个新的"),s("code",[t._v("Vue")]),t._v("实例，而该新的"),s("code",[t._v("Vue")]),t._v("实例目的是将"),s("code",[t._v("Vuex")]),t._v("中的"),s("code",[t._v("state")]),t._v("和"),s("code",[t._v("getters")]),t._v("分别注册到"),s("code",[t._v("Vue")]),t._v("实例的"),s("code",[t._v("data")]),t._v("和"),s("code",[t._v("computed")]),t._v("中,然后删除"),s("code",[t._v("store._vm")]),t._v("的旧引用。")])])}),[],!1,null,null,null);e.default=v.exports}}]);