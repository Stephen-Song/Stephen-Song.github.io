<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>redux | å°å®‹çˆ±ç¡è§‰</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="ğŸš€ä¸€ä¸ªå‰ç«¯ç¨‹åºå‘˜å°ç™½çš„åšå®¢ğŸŒ¹">
    <meta name="keywords" content="blog,crucials,frontend,å‰ç«¯,å°å®‹çˆ±ç¡è§‰,åšå®¢,duochizhacai">
    <meta name="theme-color" content="#60ad81">
    
    <link rel="preload" href="/assets/css/0.styles.65787d8c.css" as="style"><link rel="preload" href="/assets/js/app.95fc12d6.js" as="script"><link rel="preload" href="/assets/js/2.abf57e2f.js" as="script"><link rel="preload" href="/assets/js/48.8d4e8a09.js" as="script"><link rel="prefetch" href="/assets/js/10.9d6bb65c.js"><link rel="prefetch" href="/assets/js/11.bea1ca2d.js"><link rel="prefetch" href="/assets/js/12.a5ced6a2.js"><link rel="prefetch" href="/assets/js/13.ec1bcac6.js"><link rel="prefetch" href="/assets/js/14.4e5bcc62.js"><link rel="prefetch" href="/assets/js/15.753bb2dc.js"><link rel="prefetch" href="/assets/js/16.a6e51bcc.js"><link rel="prefetch" href="/assets/js/17.25227dca.js"><link rel="prefetch" href="/assets/js/18.19267273.js"><link rel="prefetch" href="/assets/js/19.a9403a12.js"><link rel="prefetch" href="/assets/js/20.c007e659.js"><link rel="prefetch" href="/assets/js/21.dca7af69.js"><link rel="prefetch" href="/assets/js/22.d9f25771.js"><link rel="prefetch" href="/assets/js/23.2668c7ed.js"><link rel="prefetch" href="/assets/js/24.30c858a4.js"><link rel="prefetch" href="/assets/js/25.bd21abb1.js"><link rel="prefetch" href="/assets/js/26.28d250cb.js"><link rel="prefetch" href="/assets/js/27.a60d212f.js"><link rel="prefetch" href="/assets/js/28.8a5c2c34.js"><link rel="prefetch" href="/assets/js/29.4688a5d6.js"><link rel="prefetch" href="/assets/js/3.e687237e.js"><link rel="prefetch" href="/assets/js/30.5985f3b4.js"><link rel="prefetch" href="/assets/js/31.7ee5d916.js"><link rel="prefetch" href="/assets/js/32.2f711dea.js"><link rel="prefetch" href="/assets/js/33.45a4e58a.js"><link rel="prefetch" href="/assets/js/34.6a46cad8.js"><link rel="prefetch" href="/assets/js/35.79084a19.js"><link rel="prefetch" href="/assets/js/36.9a5cf509.js"><link rel="prefetch" href="/assets/js/37.ea6b36a3.js"><link rel="prefetch" href="/assets/js/38.1ebed809.js"><link rel="prefetch" href="/assets/js/39.16200e67.js"><link rel="prefetch" href="/assets/js/4.4a0efd85.js"><link rel="prefetch" href="/assets/js/40.db1f5064.js"><link rel="prefetch" href="/assets/js/41.5c8205b4.js"><link rel="prefetch" href="/assets/js/42.d8e671a9.js"><link rel="prefetch" href="/assets/js/43.80c6d459.js"><link rel="prefetch" href="/assets/js/44.0dc33dbe.js"><link rel="prefetch" href="/assets/js/45.e623e04e.js"><link rel="prefetch" href="/assets/js/46.b9a46fc2.js"><link rel="prefetch" href="/assets/js/47.2d5eb349.js"><link rel="prefetch" href="/assets/js/49.f7f58461.js"><link rel="prefetch" href="/assets/js/5.84799806.js"><link rel="prefetch" href="/assets/js/50.b482896d.js"><link rel="prefetch" href="/assets/js/51.9ad2b264.js"><link rel="prefetch" href="/assets/js/52.7862671c.js"><link rel="prefetch" href="/assets/js/53.d8153804.js"><link rel="prefetch" href="/assets/js/54.0af2674d.js"><link rel="prefetch" href="/assets/js/55.597b91b8.js"><link rel="prefetch" href="/assets/js/56.46804158.js"><link rel="prefetch" href="/assets/js/57.006f6db0.js"><link rel="prefetch" href="/assets/js/58.751e40d0.js"><link rel="prefetch" href="/assets/js/59.b0ebe0e6.js"><link rel="prefetch" href="/assets/js/6.f7ec0152.js"><link rel="prefetch" href="/assets/js/60.8d675b12.js"><link rel="prefetch" href="/assets/js/61.55190a7f.js"><link rel="prefetch" href="/assets/js/62.117f5f66.js"><link rel="prefetch" href="/assets/js/63.b848bfe2.js"><link rel="prefetch" href="/assets/js/64.000227a3.js"><link rel="prefetch" href="/assets/js/65.9ec404e1.js"><link rel="prefetch" href="/assets/js/66.1834b2b1.js"><link rel="prefetch" href="/assets/js/67.bf716de8.js"><link rel="prefetch" href="/assets/js/68.6e03054c.js"><link rel="prefetch" href="/assets/js/69.c6605c56.js"><link rel="prefetch" href="/assets/js/7.40c08f02.js"><link rel="prefetch" href="/assets/js/70.30051d78.js"><link rel="prefetch" href="/assets/js/71.1fdc7d36.js"><link rel="prefetch" href="/assets/js/72.4b0ad4ad.js"><link rel="prefetch" href="/assets/js/73.e989ab6d.js"><link rel="prefetch" href="/assets/js/74.02429c23.js"><link rel="prefetch" href="/assets/js/75.8f044cef.js"><link rel="prefetch" href="/assets/js/76.7acc2de5.js"><link rel="prefetch" href="/assets/js/77.ce127400.js"><link rel="prefetch" href="/assets/js/78.deb1ae24.js"><link rel="prefetch" href="/assets/js/79.75a4c78b.js"><link rel="prefetch" href="/assets/js/8.303c64d8.js"><link rel="prefetch" href="/assets/js/80.6c258060.js"><link rel="prefetch" href="/assets/js/81.563a0c28.js"><link rel="prefetch" href="/assets/js/82.143b4caf.js"><link rel="prefetch" href="/assets/js/83.32431b7f.js"><link rel="prefetch" href="/assets/js/84.2320a5a5.js"><link rel="prefetch" href="/assets/js/85.d9a1625a.js"><link rel="prefetch" href="/assets/js/86.dc0f47f2.js"><link rel="prefetch" href="/assets/js/87.8335157f.js"><link rel="prefetch" href="/assets/js/88.2cfc7001.js"><link rel="prefetch" href="/assets/js/89.6bc590c2.js"><link rel="prefetch" href="/assets/js/9.7ba1b2de.js"><link rel="prefetch" href="/assets/js/90.c20801a7.js"><link rel="prefetch" href="/assets/js/91.1a32fafc.js"><link rel="prefetch" href="/assets/js/92.4a802465.js">
    <link rel="stylesheet" href="/assets/css/0.styles.65787d8c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/logo.png" alt="å°å®‹çˆ±ç¡è§‰" class="logo"> <span class="site-name can-hide">å°å®‹çˆ±ç¡è§‰</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="çŸ¥è¯†åº“" class="dropdown-title"><a href="/pages/56881f/" class="link-title">çŸ¥è¯†åº“</a> <span class="title" style="display:none;">çŸ¥è¯†åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56881f/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/c0e7f0/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/787250/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/pages/f0a671/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/pages/b7238f/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/pages/2448f7/" class="nav-link">è®¡ç®—æœºç½‘ç»œ</a></li><li class="dropdown-item"><!----> <a href="/pages/b8bd46/" class="nav-link">æµè§ˆå™¨åŸç†</a></li><li class="dropdown-item"><!----> <a href="/pages/f15087/" class="nav-link">æ€§èƒ½ä¼˜åŒ–</a></li><li class="dropdown-item"><!----> <a href="/pages/e3cba5/" class="nav-link">è®¾è®¡æ¨¡å¼</a></li></ul></div></div><div class="nav-item"><a href="/pages/ba01c4/" class="nav-link">æ‰‹å†™ç³»åˆ—</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç®—æ³•" class="dropdown-title"><a href="/pages/ad5191/" class="link-title">ç®—æ³•</a> <span class="title" style="display:none;">ç®—æ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8ac126/" class="nav-link">å­—ç¬¦ä¸²</a></li><li class="dropdown-item"><!----> <a href="/pages/251490/" class="nav-link">æ•°ç»„</a></li><li class="dropdown-item"><!----> <a href="/pages/fc9745/" class="nav-link">é“¾è¡¨</a></li><li class="dropdown-item"><!----> <a href="/pages/ad5191/" class="nav-link">æ ‘</a></li><li class="dropdown-item"><!----> <a href="/pages/6aee18/" class="nav-link">åŠ¨æ€è§„åˆ’</a></li><li class="dropdown-item"><!----> <a href="/pages/78e948/" class="nav-link">æ’åºç®—æ³•</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><a href="/pages/30f7b5/https://github.com/duochizhacai" class="link-title">GitHub</a> <span class="title" style="display:none;">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/duochizhacai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1249486902410744" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JueJin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="çŸ¥è¯†åº“" class="dropdown-title"><a href="/pages/56881f/" class="link-title">çŸ¥è¯†åº“</a> <span class="title" style="display:none;">çŸ¥è¯†åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56881f/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/c0e7f0/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/787250/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/pages/f0a671/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/pages/b7238f/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/pages/2448f7/" class="nav-link">è®¡ç®—æœºç½‘ç»œ</a></li><li class="dropdown-item"><!----> <a href="/pages/b8bd46/" class="nav-link">æµè§ˆå™¨åŸç†</a></li><li class="dropdown-item"><!----> <a href="/pages/f15087/" class="nav-link">æ€§èƒ½ä¼˜åŒ–</a></li><li class="dropdown-item"><!----> <a href="/pages/e3cba5/" class="nav-link">è®¾è®¡æ¨¡å¼</a></li></ul></div></div><div class="nav-item"><a href="/pages/ba01c4/" class="nav-link">æ‰‹å†™ç³»åˆ—</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç®—æ³•" class="dropdown-title"><a href="/pages/ad5191/" class="link-title">ç®—æ³•</a> <span class="title" style="display:none;">ç®—æ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8ac126/" class="nav-link">å­—ç¬¦ä¸²</a></li><li class="dropdown-item"><!----> <a href="/pages/251490/" class="nav-link">æ•°ç»„</a></li><li class="dropdown-item"><!----> <a href="/pages/fc9745/" class="nav-link">é“¾è¡¨</a></li><li class="dropdown-item"><!----> <a href="/pages/ad5191/" class="nav-link">æ ‘</a></li><li class="dropdown-item"><!----> <a href="/pages/6aee18/" class="nav-link">åŠ¨æ€è§„åˆ’</a></li><li class="dropdown-item"><!----> <a href="/pages/78e948/" class="nav-link">æ’åºç®—æ³•</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><a href="/pages/30f7b5/https://github.com/duochizhacai" class="link-title">GitHub</a> <span class="title" style="display:none;">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/duochizhacai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1249486902410744" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JueJin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/pages/b7238f/" class="sidebar-link">äº‹ä»¶æœºåˆ¶</a></li><li><a href="/pages/24db5f/" class="sidebar-link">æ•°æ®ç®¡ç†</a></li><li><a href="/pages/54c6f9/" class="sidebar-link">ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="/pages/be9376/" class="sidebar-link">ç»„ä»¶é€šä¿¡</a></li><li><a href="/pages/000594/" class="sidebar-link">è·¯ç”±</a></li><li><a href="/pages/30f7b5/" aria-current="page" class="active sidebar-link">redux</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/30f7b5/#å¯¹-redux-çš„ç†è§£-ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜" class="sidebar-link">å¯¹ Redux çš„ç†è§£ï¼Œä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#redux-åŸç†åŠå·¥ä½œæµç¨‹" class="sidebar-link">Redux åŸç†åŠå·¥ä½œæµç¨‹</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#redux-ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†" class="sidebar-link">Redux ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#redux-æ€ä¹ˆå®ç°å±æ€§ä¼ é€’-ä»‹ç»ä¸‹åŸç†" class="sidebar-link">Redux æ€ä¹ˆå®ç°å±æ€§ä¼ é€’ï¼Œä»‹ç»ä¸‹åŸç†</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#redux-ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆ-æ¥å—å‡ ä¸ªå‚æ•°-æŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆ" class="sidebar-link">Redux ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ¥å—å‡ ä¸ªå‚æ•°ï¼ŸæŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#redux-è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘" class="sidebar-link">Redux è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#redux-çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ°-window-ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«" class="sidebar-link">Redux çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ° window ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#mobx-å’Œ-redux-æœ‰ä»€ä¹ˆåŒºåˆ«" class="sidebar-link">mobx å’Œ redux æœ‰ä»€ä¹ˆåŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#redux-å’Œ-vuex-æœ‰ä»€ä¹ˆåŒºåˆ«-å®ƒä»¬çš„å…±åŒæ€æƒ³" class="sidebar-link">Redux å’Œ Vuex æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬çš„å…±åŒæ€æƒ³</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#redux-ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store-å’Œ-action-ç„¶åæ€ä¹ˆå¤„ç†" class="sidebar-link">Redux ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store å’Œ action? ç„¶åæ€ä¹ˆå¤„ç†?</a></li><li class="sidebar-sub-header"><a href="/pages/30f7b5/#reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨" class="sidebar-link">Reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨</a></li></ul></li><li><a href="/pages/6bcb1a/" class="sidebar-link">Hooks</a></li><li><a href="/pages/b06269/" class="sidebar-link">è™šæ‹ŸDOM</a></li><li><a href="/pages/b0c8ad/" class="sidebar-link">å…¶ä»–</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><span data-v-1cd794fe>React</span></li> <!----> <!----></ul> <div class="info" data-v-1cd794fe><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/duochizhacai" target="_blank" title="ä½œè€…" class="beLink" data-v-1cd794fe>Crucials</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2022-05-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          redux
        </h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="å¯¹-redux-çš„ç†è§£-ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜"><a href="#å¯¹-redux-çš„ç†è§£-ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜" class="header-anchor">#</a> å¯¹ <code>Redux</code> çš„ç†è§£ï¼Œä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜</h2> <p><code>React</code> æ˜¯è§†å›¾å±‚æ¡†æ¶ã€‚<code>Redux</code> æ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç†æ•°æ®çŠ¶æ€å’Œ<code>UI</code>çŠ¶æ€çš„<code>JavaScript</code>åº”ç”¨å·¥å…·ã€‚éšç€<code>JavaScript</code>å•é¡µåº”ç”¨ï¼ˆ<code>SPA</code>ï¼‰å¼€å‘æ—¥è¶‹å¤æ‚ï¼Œ <code>JavaScript</code> éœ€è¦ç®¡ç†æ¯”ä»»ä½•æ—¶å€™éƒ½è¦å¤šçš„<code>state</code>ï¼ˆçŠ¶æ€ï¼‰ï¼Œ <code>Redux</code>å°±æ˜¯é™ä½ç®¡ç†éš¾åº¦çš„.</p> <p>åœ¨ <code>React</code> ä¸­ï¼Œ<code>UI</code> ä»¥ç»„ä»¶çš„å½¢å¼æ¥æ­å»ºï¼Œç»„ä»¶ä¹‹é—´å¯ä»¥åµŒå¥—ç»„åˆã€‚ä½† <code>React</code> ä¸­ç»„ä»¶é—´é€šä¿¡çš„æ•°æ®æµæ˜¯å•å‘çš„ï¼Œé¡¶å±‚ç»„ä»¶å¯ä»¥é€šè¿‡ <code>props</code> å±æ€§å‘ä¸‹å±‚ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œè€Œä¸‹å±‚ç»„ä»¶ä¸èƒ½å‘ä¸Šå±‚ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå…„å¼Ÿç»„ä»¶ä¹‹é—´åŒæ ·ä¸èƒ½ã€‚è¿™æ ·ç®€å•çš„å•å‘æ•°æ®æµæ”¯æ’‘èµ·äº† <code>React</code> ä¸­çš„æ•°æ®å¯æ§æ€§ã€‚</p> <p>å½“é¡¹ç›®è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œç®¡ç†æ•°æ®çš„äº‹ä»¶æˆ–å›è°ƒå‡½æ•°å°†è¶Šæ¥è¶Šå¤šï¼Œä¹Ÿå°†è¶Šæ¥è¶Šä¸å¥½ç®¡ç†ã€‚ç®¡ç†ä¸æ–­å˜åŒ–çš„ <code>state</code> éå¸¸å›°éš¾ã€‚å¦‚æœä¸€ä¸ª <code>model</code> çš„å˜åŒ–ä¼šå¼•èµ·å¦ä¸€ä¸ª <code>model</code> å˜åŒ–ï¼Œé‚£ä¹ˆå½“ <code>view</code> å˜åŒ–æ—¶ï¼Œå°±å¯èƒ½å¼•èµ·å¯¹åº” <code>model</code> ä»¥åŠå¦ä¸€ä¸ª <code>model</code> çš„å˜åŒ–ï¼Œä¾æ¬¡åœ°ï¼Œå¯èƒ½ä¼šå¼•èµ·å¦ä¸€ä¸ª <code>view</code> çš„å˜åŒ–ã€‚ç›´è‡³ä½ æä¸æ¸…æ¥šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚<code>state</code> åœ¨ä»€ä¹ˆæ—¶å€™ï¼Œç”±äºä»€ä¹ˆåŸå› ï¼Œå¦‚ä½•å˜åŒ–å·²ç„¶ä¸å—æ§åˆ¶ã€‚ å½“ç³»ç»Ÿå˜å¾—é”™ç»¼å¤æ‚çš„æ—¶å€™ï¼Œæƒ³é‡ç°é—®é¢˜æˆ–è€…æ·»åŠ æ–°åŠŸèƒ½å°±ä¼šå˜å¾—ä¸¾æ­¥ç»´è‰°ã€‚å¦‚æœè¿™è¿˜ä¸å¤Ÿç³Ÿç³•ï¼Œè€ƒè™‘ä¸€äº›æ¥è‡ªå‰ç«¯å¼€å‘é¢†åŸŸçš„æ–°éœ€æ±‚ï¼Œå¦‚æ›´æ–°è°ƒä¼˜ã€æœåŠ¡ç«¯æ¸²æŸ“ã€è·¯ç”±è·³è½¬å‰è¯·æ±‚æ•°æ®ç­‰ã€‚<code>state</code> çš„ç®¡ç†åœ¨å¤§é¡¹ç›®ä¸­ç›¸å½“å¤æ‚ã€‚</p> <p><code>Redux</code> æä¾›äº†ä¸€ä¸ªå« <code>store</code> çš„ç»Ÿä¸€ä»“å‚¨åº“ï¼Œç»„ä»¶é€šè¿‡ <code>dispatch</code> å°† <code>state</code> ç›´æ¥ä¼ å…¥ <code>store</code>ï¼Œä¸ç”¨é€šè¿‡å…¶ä»–çš„ç»„ä»¶ã€‚å¹¶ä¸”ç»„ä»¶é€šè¿‡ <code>subscribe</code> ä» <code>store</code> è·å–åˆ° <code>state</code> çš„æ”¹å˜ã€‚ä½¿ç”¨äº† <code>Redux</code> ï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥ä» <code>store</code> ä¸­è·å–åˆ°æ‰€éœ€çš„ <code>state</code>ï¼Œä»–ä»¬ä¹Ÿèƒ½ä» <code>store</code> è·å–åˆ° <code>state</code> çš„æ”¹å˜ã€‚è¿™æ¯”ç»„ä»¶ä¹‹é—´äº’ç›¸ä¼ é€’æ•°æ®æ¸…æ™°æ˜æœ—çš„å¤šã€‚</p> <p><strong>ä¸»è¦è§£å†³çš„é—®é¢˜ï¼š</strong> å•çº¯çš„ <code>Redux</code> åªæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œæ˜¯æ²¡æœ‰<code>UI</code>å‘ˆç°çš„ï¼Œ<code>react- redux</code>ä½œç”¨æ˜¯å°†<code>Redux</code>çš„çŠ¶æ€æœºå’Œ<code>React</code>çš„<code>UI</code>å‘ˆç°ç»‘å®šåœ¨ä¸€èµ·ï¼Œå½“ä½ <code>dispatch action</code>æ”¹å˜<code>state</code>çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ›´æ–°é¡µé¢ã€‚</p> <h2 id="redux-åŸç†åŠå·¥ä½œæµç¨‹"><a href="#redux-åŸç†åŠå·¥ä½œæµç¨‹" class="header-anchor">#</a> <code>Redux</code> åŸç†åŠå·¥ä½œæµç¨‹</h2> <p><strong>åŸç†</strong> <code>Redux</code>æºç ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ¨¡å—æ–‡ä»¶</p> <ul><li><code>compose.js</code> æä¾›ä»å³åˆ°å·¦è¿›è¡Œå‡½æ•°å¼ç¼–ç¨‹</li> <li><code>createStore.js</code> æä¾›ä½œä¸ºç”Ÿæˆå”¯ä¸€<code>store</code>çš„å‡½æ•°</li> <li><code>combineReducers.js</code> æä¾›åˆå¹¶å¤šä¸ª <code>reducer</code> çš„å‡½æ•°ï¼Œä¿è¯<code>store</code> çš„å”¯ä¸€æ€§</li> <li><code>bindActionCreators.js</code> å¯ä»¥è®©å¼€å‘è€…åœ¨ä¸ç›´æ¥æ¥è§¦ <code>dispatch</code> çš„å‰æä¸‹è¿›è¡Œæ›´æ”¹<code>state</code>çš„æ“ä½œ</li> <li><code>applyMiddleware.js</code> è¿™ä¸ªæ–¹æ³•é€šè¿‡ä¸­é—´ä»¶æ¥å¢å¼º<code>dispatch</code>çš„åŠŸèƒ½</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> actionTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token constant">ADD</span><span class="token operator">:</span> <span class="token string">'ADD'</span><span class="token punctuation">,</span>
    <span class="token constant">CHANGEINFO</span><span class="token operator">:</span> <span class="token string">'CHANGEINFO'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> initState <span class="token operator">=</span> <span class="token punctuation">{</span>
    info<span class="token operator">:</span> <span class="token string">'åˆå§‹åŒ–'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">initReducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token operator">=</span>initState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> actionTypes<span class="token punctuation">.</span><span class="token constant">CHANGEINFO</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token operator">...</span>state<span class="token punctuation">,</span>
                info<span class="token operator">:</span> action<span class="token punctuation">.</span>preload<span class="token punctuation">.</span>info <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token parameter">reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">,</span> middleFunc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>initialState <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> initialState <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        middleFunc <span class="token operator">=</span> initialState<span class="token punctuation">;</span>
        initialState <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> currentState <span class="token operator">=</span> initialState<span class="token punctuation">;</span>

    <span class="token keyword">const</span> listeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>middleFunc <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> middleFunc <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°è£…dispatch </span>
        <span class="token keyword">return</span> <span class="token function">middleFunc</span><span class="token punctuation">(</span>createStore<span class="token punctuation">)</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">getState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> currentState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        currentState <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>currentState<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>

        listeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">listener</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">listener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">subscribe</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">listener</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        listeners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        getState<span class="token punctuation">,</span>
        dispatch<span class="token punctuation">,</span>
        subscribe
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><p><strong>å·¥ä½œæµç¨‹</strong></p> <ul><li><code>const store= createStore(fn)</code>ç”Ÿæˆæ•°æ®;</li> <li><code>action: {type: Symble('action01), payload:'payload' }</code>å®šä¹‰è¡Œä¸º;</li> <li><code>dispatch</code>å‘èµ·<code>actionï¼šstore.dispatch(doSomething('action001'))</code>;</li> <li><code>reducer</code>å¤„ç†<code>action</code>ï¼Œè¿”å›æ–°çš„<code>state</code>;</li></ul> <p>é€šä¿—ç‚¹è§£é‡Šï¼š</p> <ul><li>é¦–å…ˆï¼Œç”¨æˆ·ï¼ˆé€šè¿‡<code>View</code>ï¼‰å‘å‡º<code>Action</code>ï¼Œå‘å‡ºæ–¹å¼å°±ç”¨åˆ°äº†<code>dispatch</code>æ–¹æ³•</li> <li>ç„¶åï¼Œ<code>Store</code> è‡ªåŠ¨è°ƒç”¨ <code>Reducer</code>ï¼Œå¹¶ä¸”ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰<code>State</code>å’Œæ”¶åˆ°çš„<code>Action</code>ï¼Œ<code>Reducer</code>ä¼šè¿”å›æ–°çš„<code>State</code></li> <li><code>State</code>â€”æ—¦æœ‰å˜åŒ–ï¼Œ<code>Store</code>å°±ä¼šè°ƒç”¨ç›‘å¬å‡½æ•°ï¼Œæ¥æ›´æ–°<code>View</code></li></ul> <p>ä»¥ <code>store</code> ä¸ºæ ¸å¿ƒï¼Œå¯ä»¥æŠŠå®ƒçœ‹æˆæ•°æ®å­˜å‚¨ä¸­å¿ƒï¼Œä½†æ˜¯ä»–è¦æ›´æ”¹æ•°æ®çš„æ—¶å€™ä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œæ•°æ®ä¿®æ”¹æ›´æ–°çš„è§’è‰²ç”±<code>Reducers</code>æ¥æ‹…ä»»ï¼Œ<code>store</code>åªåšå­˜å‚¨ï¼Œä¸­é—´äººï¼Œå½“<code>Reducers</code>çš„æ›´æ–°å®Œæˆä»¥åä¼šé€šè¿‡<code>store</code>çš„è®¢é˜…æ¥é€šçŸ¥<code>react component</code>ï¼Œç»„ä»¶æŠŠæ–°çš„çŠ¶æ€é‡æ–°è·å–æ¸²æŸ“ï¼Œç»„ä»¶ä¸­ä¹Ÿèƒ½ä¸»åŠ¨å‘é€<code>action</code>ï¼Œåˆ›å»º<code>action</code>åè¿™ä¸ªåŠ¨ä½œæ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œæ‰€ä»¥è¦<code>dispatch</code>è¿™ä¸ª<code>action</code>ï¼Œè®©<code>store</code>é€šè¿‡<code>reducers</code>å»åšæ›´æ–°<code>React Component</code> å°±æ˜¯<code>react</code>çš„æ¯ä¸ªç»„ä»¶ã€‚</p> <h2 id="redux-ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†"><a href="#redux-ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†" class="header-anchor">#</a> <code>Redux</code> ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†</h2> <p>å¯ä»¥åœ¨ <code>componentDidmount</code> ä¸­ç›´æ¥è¿›â¾è¯·æ±‚â½†é¡»å€ŸåŠ©<code>redux</code>ã€‚ä½†æ˜¯åœ¨â¼€å®šè§„æ¨¡çš„é¡¹â½¬ä¸­,ä¸Šè¿°â½…æ³•å¾ˆéš¾è¿›â¾å¼‚æ­¥æµçš„ç®¡ç†,é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šå€ŸåŠ©<code>redux</code>çš„å¼‚æ­¥ä¸­é—´ä»¶è¿›â¾å¼‚æ­¥å¤„ç†ã€‚<code>redux</code>å¼‚æ­¥æµä¸­é—´ä»¶å…¶å®æœ‰å¾ˆå¤šï¼Œå½“ä¸‹ä¸»æµçš„å¼‚æ­¥ä¸­é—´ä»¶æœ‰ä¸¤ç§<code>redux-thunk</code>ã€<code>redux-saga</code>ã€‚</p> <p><strong>1. ä½¿ç”¨<code>react-thunk</code>ä¸­é—´ä»¶</strong></p> <p><strong><code>redux-thunk</code></strong> ä¼˜ç‚¹:</p> <ul><li>ä½“ç§¯â¼©: <code>redux-thunk</code>çš„å®ç°â½…å¼å¾ˆç®€å•</li> <li>ä½¿â½¤ç®€å•: <code>redux-thunk</code>æ²¡æœ‰å¼•â¼Šåƒ<code>redux-saga</code>æˆ–è€…<code>redux-observable</code>é¢å¤–çš„èŒƒå¼,ä¸Šâ¼¿ç®€å•</li></ul> <p><strong><code>redux-thunk</code></strong> ç¼ºé™·:</p> <ul><li>æ ·æ¿ä»£ç è¿‡å¤š: ä¸<code>redux</code>æœ¬èº«â¼€æ ·,é€šå¸¸â¼€ä¸ªè¯·æ±‚éœ€è¦â¼¤é‡çš„ä»£ç ,â½½ä¸”å¾ˆå¤šéƒ½æ˜¯é‡å¤æ€§è´¨çš„</li> <li>è€¦åˆä¸¥é‡: å¼‚æ­¥æ“ä½œä¸<code>redux</code>çš„<code>action</code>å¶åˆåœ¨â¼€èµ·,ä¸â½…ä¾¿ç®¡ç†</li> <li>åŠŸèƒ½å­±å¼±: æœ‰â¼€äº›å®é™…å¼€å‘ä¸­å¸¸â½¤çš„åŠŸèƒ½éœ€è¦â¾ƒâ¼°è¿›â¾å°è£…</li></ul> <p>ä½¿ç”¨æ­¥éª¤ï¼š</p> <ul><li>é…ç½®ä¸­é—´ä»¶ï¼Œåœ¨<code>store</code>çš„åˆ›å»ºä¸­é…ç½®</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">,</span> applyMiddleware<span class="token punctuation">,</span> compose<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>

<span class="token comment">// è®¾ç½®è°ƒè¯•å·¥å…·</span>
<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span> window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> compose<span class="token punctuation">;</span>
<span class="token comment">// è®¾ç½®ä¸­é—´ä»¶</span>
<span class="token keyword">const</span> enhancer <span class="token operator">=</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span>
  <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> enhancer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>æ·»åŠ ä¸€ä¸ªè¿”å›å‡½æ•°çš„<code>actionCreator</code>ï¼Œå°†å¼‚æ­¥è¯·æ±‚é€»è¾‘æ”¾åœ¨é‡Œé¢</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
  å‘é€getè¯·æ±‚ï¼Œå¹¶ç”Ÿæˆç›¸åº”actionï¼Œæ›´æ–°storeçš„å‡½æ•°
  @param url {string} è¯·æ±‚åœ°å€
  @param func {function} çœŸæ­£éœ€è¦ç”Ÿæˆçš„actionå¯¹åº”çš„actionCreator
  @return {function} 
*/</span>
<span class="token comment">// dispatchä¸ºè‡ªåŠ¨æ¥æ”¶çš„store.dispatchå‡½æ•° </span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getHttpAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>ç”Ÿæˆ<code>action</code>ï¼Œå¹¶å‘é€<code>action</code></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> action <span class="token operator">=</span> <span class="token function">getHttpAction</span><span class="token punctuation">(</span><span class="token string">'/getData'</span><span class="token punctuation">,</span> getInitTodoItemAction<span class="token punctuation">)</span>
    <span class="token comment">// å‘é€å‡½æ•°ç±»å‹çš„actionæ—¶ï¼Œè¯¥actionçš„å‡½æ•°ä½“ä¼šè‡ªåŠ¨æ‰§è¡Œ</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>2. ä½¿ç”¨<code>redux-saga</code>ä¸­é—´ä»¶</strong></p> <p><strong><code>redux-saga</code></strong> ä¼˜ç‚¹:</p> <ul><li>å¼‚æ­¥è§£è€¦: å¼‚æ­¥æ“ä½œè¢«è¢«è½¬ç§»åˆ°å•ç‹¬ <code>saga.js</code> ä¸­ï¼Œä¸å†æ˜¯æºæ‚åœ¨ <code>action.js</code> æˆ– <code>component.js</code> ä¸­</li> <li><code>action</code>æ‘†è„±<code>thunk function: dispatch</code> çš„å‚æ•°ä¾ç„¶æ˜¯â¼€ä¸ªçº¯ç²¹çš„ <code>action (FSA)</code>ï¼Œâ½½ä¸æ˜¯å……æ»¡ â€œâ¿Šé­”æ³•â€ <code>thunk function</code></li> <li>å¼‚å¸¸å¤„ç†: å—ç›Šäº <code>generator function</code> çš„ <code>saga</code> å®ç°ï¼Œä»£ç å¼‚å¸¸/è¯·æ±‚å¤±è´¥ éƒ½å¯ä»¥ç›´æ¥é€šè¿‡ <code>try/catch</code> è¯­æ³•ç›´æ¥æ•è·å¤„ç†</li> <li>åŠŸèƒ½å¼ºâ¼¤: <code>redux-saga</code>æä¾›äº†â¼¤é‡çš„<code>Saga</code> è¾…åŠ©å‡½æ•°å’Œ<code>Effect</code> åˆ›å»ºå™¨ä¾›å¼€å‘è€…ä½¿â½¤,å¼€å‘è€…â½†é¡»å°è£…æˆ–è€…ç®€å•å°è£…å³å¯ä½¿â½¤</li> <li>çµæ´»: <code>redux-saga</code> å¯ä»¥å°†å¤šä¸ª<code>Saga</code>å¯ä»¥ä¸²â¾/å¹¶â¾ç»„åˆèµ·æ¥,å½¢æˆâ¼€ä¸ªâ¾®å¸¸å®â½¤çš„å¼‚æ­¥<code>flow</code></li> <li>æ˜“æµ‹è¯•ï¼Œæä¾›äº†å„ç§<code>case</code>çš„æµ‹è¯•â½…æ¡ˆï¼ŒåŒ…æ‹¬<code>mock task</code>ï¼Œåˆ†â½€è¦†ç›–ç­‰ç­‰</li></ul> <p><strong><code>redux-saga</code></strong> ç¼ºé™·:</p> <ul><li>é¢å¤–çš„å­¦ä¹ æˆæœ¬: <code>redux-saga</code>ä¸ä»…åœ¨ä½¿â½¤éš¾ä»¥ç†è§£çš„ <code>generator function</code>,â½½ä¸”æœ‰æ•°â¼—ä¸ª<code>API</code>,å­¦ä¹ æˆæœ¬è¿œè¶…<code>redux-thunk</code>,æœ€é‡è¦çš„æ˜¯ä½ çš„é¢å¤–å­¦ä¹ æˆæœ¬æ˜¯åªæœåŠ¡äºè¿™ä¸ªåº“çš„,ä¸<code>redux-observable</code>ä¸åŒ,<code>redux-observable</code>è™½ç„¶ä¹Ÿæœ‰é¢å¤–å­¦ä¹ æˆæœ¬ä½†æ˜¯èƒŒåæ˜¯<code>rxjs</code>å’Œâ¼€æ•´å¥—æ€æƒ³</li> <li>ä½“ç§¯åºâ¼¤: ä½“ç§¯ç•¥â¼¤,ä»£ç è¿‘<code>2000</code>â¾ï¼Œ<code>min</code>ç‰ˆ<code>25KB</code>å·¦å³</li> <li>åŠŸèƒ½è¿‡å‰©: å®é™…ä¸Šå¹¶å‘æ§åˆ¶ç­‰åŠŸèƒ½å¾ˆéš¾â½¤åˆ°,ä½†æ˜¯æˆ‘ä»¬ä¾ç„¶éœ€è¦å¼•â¼Šè¿™äº›ä»£ç </li> <li><code>ts</code>â½€æŒä¸å‹å¥½: <code>yield</code>â½†æ³•è¿”å›<code>TS</code>ç±»å‹</li></ul> <p><code>redux-saga</code>å¯ä»¥æ•è·<code>action</code>ï¼Œç„¶åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠå¼‚æ­¥ä»£ç æ”¾åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p> <ul><li>é…ç½®ä¸­é—´ä»¶</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">,</span> applyMiddleware<span class="token punctuation">,</span> compose<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> createSagaMiddleware <span class="token keyword">from</span> <span class="token string">'redux-saga'</span>
<span class="token keyword">import</span> TodoListSaga <span class="token keyword">from</span> <span class="token string">'./sagas'</span>

<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span> window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> compose<span class="token punctuation">;</span>
<span class="token keyword">const</span> sagaMiddleware <span class="token operator">=</span> <span class="token function">createSagaMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> enhancer <span class="token operator">=</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span>
  <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>sagaMiddleware<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> enhancer<span class="token punctuation">)</span><span class="token punctuation">;</span>
sagaMiddleware<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>TodoListSaga<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>å°†å¼‚æ­¥è¯·æ±‚æ”¾åœ¨<code>sagas.js</code>ä¸­</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>takeEvery<span class="token punctuation">,</span> put<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga/effects'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>initTodoList<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionCreator'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">GET_INIT_ITEM</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token comment">// å¯ä»¥è·å–å¼‚æ­¥è¿”å›æ•°æ®</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">yield</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/getData'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">initTodoList</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token comment">// å°†actionå‘é€åˆ°reducer</span>
    <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç½‘ç»œè¯·æ±‚å¤±è´¥'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">mySaga</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// è‡ªåŠ¨æ•è·GET_INIT_ITEMç±»å‹çš„actionï¼Œå¹¶æ‰§è¡Œfunc</span>
  <span class="token keyword">yield</span> <span class="token function">takeEvery</span><span class="token punctuation">(</span><span class="token constant">GET_INIT_ITEM</span><span class="token punctuation">,</span> func<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> mySaga
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li>å‘é€<code>action</code></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getInitTodoItemAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="redux-æ€ä¹ˆå®ç°å±æ€§ä¼ é€’-ä»‹ç»ä¸‹åŸç†"><a href="#redux-æ€ä¹ˆå®ç°å±æ€§ä¼ é€’-ä»‹ç»ä¸‹åŸç†" class="header-anchor">#</a> <code>Redux</code> æ€ä¹ˆå®ç°å±æ€§ä¼ é€’ï¼Œä»‹ç»ä¸‹åŸç†</h2> <p><code>react-redux</code> æ•°æ®ä¼ è¾“âˆ¶ <code>view--&gt;action--&gt;reducer--&gt;store--&gt;view</code>ã€‚çœ‹ä¸‹ç‚¹å‡»äº‹ä»¶çš„æ•°æ®æ˜¯å¦‚ä½•é€šè¿‡<code>redux</code>ä¼ åˆ°<code>view</code>ä¸Šï¼š</p> <ul><li><code>view</code> ä¸Šçš„<code>AddClick</code> äº‹ä»¶é€šè¿‡<code>mapDispatchToProps</code> æŠŠæ•°æ®ä¼ åˆ°<code>action</code> ---&gt; <code>click:()=&gt;dispatch(ADD)</code></li> <li><code>action</code> çš„<code>ADD</code> ä¼ åˆ°<code>reducer</code>ä¸Š</li> <li><code>reducer</code>ä¼ åˆ°<code>store</code>ä¸Š <code>const store = createStore(reducer)</code>;</li> <li><code>store</code>å†é€šè¿‡ <code>mapStateToProps</code> æ˜ å°„ç©¿åˆ°<code>viewä¸Štext:State.text</code></li></ul> <p>ä»£ç ç¤ºä¾‹âˆ¶</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> text<span class="token punctuation">,</span> click<span class="token punctuation">,</span> clickR <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>æ•°æ®<span class="token operator">:</span>å·²æœ‰äºº<span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>click<span class="token punctuation">}</span><span class="token operator">&gt;</span>åŠ äºº<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>clickR<span class="token punctuation">}</span><span class="token operator">&gt;</span>å‡äºº<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  text<span class="token operator">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>action</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'ADD'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>text<span class="token operator">:</span>state<span class="token punctuation">.</span>text<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'REMOVE'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>text<span class="token operator">:</span>state<span class="token punctuation">.</span>text<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> initialState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token constant">ADD</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span><span class="token string">'ADD'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> Remove <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span><span class="token string">'REMOVE'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">{</span>
    text<span class="token operator">:</span>state<span class="token punctuation">.</span>text
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">{</span>
    <span class="token function-variable function">click</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token constant">ADD</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">clickR</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">dispatch</span><span class="token punctuation">(</span>Remove<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> App1 <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span>mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Provider store <span class="token operator">=</span> <span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>App1 <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h2 id="redux-ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆ-æ¥å—å‡ ä¸ªå‚æ•°-æŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆ"><a href="#redux-ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆ-æ¥å—å‡ ä¸ªå‚æ•°-æŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> <code>Redux</code> ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ¥å—å‡ ä¸ªå‚æ•°ï¼ŸæŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ</h2> <p><code>Redux</code> çš„ä¸­é—´ä»¶æä¾›çš„æ˜¯ä½äº <code>action</code> è¢«å‘èµ·ä¹‹åï¼Œåˆ°è¾¾ reducer ä¹‹å‰çš„æ‰©å±•ç‚¹ï¼Œæ¢è€Œè¨€ä¹‹ï¼ŒåŸæœ¬ <code>view â†’ action â†’ reducer â†’ store</code> çš„æ•°æ®æµåŠ ä¸Šä¸­é—´ä»¶åå˜æˆäº† <code>view â†’ action â†’ middleware â†’ reducer â†’ store</code> ï¼Œåœ¨è¿™ä¸€ç¯èŠ‚å¯ä»¥åšä¸€äº›&quot;å‰¯ä½œç”¨&quot;çš„æ“ä½œï¼Œå¦‚å¼‚æ­¥è¯·æ±‚ã€æ‰“å°æ—¥å¿—ç­‰ã€‚</p> <p><code>applyMiddleware</code> æºç ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>middlewares</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token parameter">createStore</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ©ç”¨ä¼ å…¥çš„createStoreå’Œreducerå’Œåˆ›å»ºä¸€ä¸ªstore</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
    <span class="token keyword">let</span> <span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> middlewareAPI <span class="token operator">=</span> <span class="token punctuation">{</span>
      getState<span class="token operator">:</span> store<span class="token punctuation">.</span>getState<span class="token punctuation">,</span>
      <span class="token function-variable function">dispatch</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è®©æ¯ä¸ª middleware å¸¦ç€ middlewareAPI è¿™ä¸ªå‚æ•°åˆ†åˆ«æ‰§è¡Œä¸€é</span>
    <span class="token keyword">const</span> chain <span class="token operator">=</span> middlewares<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">middleware</span> <span class="token operator">=&gt;</span> <span class="token function">middleware</span><span class="token punctuation">(</span>middlewareAPI<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// æ¥ç€ compose å°† chain ä¸­çš„æ‰€æœ‰åŒ¿åå‡½æ•°ï¼Œç»„è£…æˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå³æ–°çš„ dispatch</span>
    dispatch <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token operator">...</span>chain<span class="token punctuation">)</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>dispatch<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>store<span class="token punctuation">,</span>
      dispatch
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ä»<code>applyMiddleware</code>ä¸­å¯ä»¥çœ‹å‡ºâˆ¶</p> <ul><li><code>redux</code>ä¸­é—´ä»¶æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¯¹è±¡çš„å‚æ•°ä¸Šæœ‰ä¸¤ä¸ªå­—æ®µ <code>dispatch</code> å’Œ <code>getState</code>ï¼Œåˆ†åˆ«ä»£è¡¨ç€ <code>Redux Store</code> ä¸Šçš„ä¸¤ä¸ªåŒåå‡½æ•°ã€‚</li> <li>æŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯ä¸€ä¸ªæ˜¯ <code>middewares</code>ï¼Œä¸€ä¸ªæ˜¯ <code>store.dispatch</code></li></ul> <h2 id="redux-è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘"><a href="#redux-è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘" class="header-anchor">#</a> <code>Redux</code> è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘</h2> <p><strong>ä½¿ç”¨<code>redux-Saga</code></strong> ,ä¸€ä¸ªç®¡ç†<code>redux</code>åº”ç”¨å¼‚æ­¥æ“ä½œçš„ä¸­é—´ä»¶ï¼Œç”¨äºä»£æ›¿ <code>redux-thunk</code> çš„ã€‚å®ƒé€šè¿‡åˆ›å»º <code>Sagas</code> å°†æ‰€æœ‰å¼‚æ­¥æ“ä½œé€»è¾‘å­˜æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹è¿›è¡Œé›†ä¸­å¤„ç†ï¼Œä»¥æ­¤å°†<code>react</code>ä¸­çš„åŒæ­¥æ“ä½œä¸å¼‚æ­¥æ“ä½œåŒºåˆ†å¼€æ¥ï¼Œä»¥ä¾¿äºåæœŸçš„ç®¡ç†ä¸ç»´æŠ¤ã€‚ <code>redux-saga</code>å¦‚ä½•å¤„ç†å¹¶å‘ï¼š</p> <ul><li><strong><code>takeEvery</code></strong></li></ul> <p>å¯ä»¥è®©å¤šä¸ª <code>saga</code> ä»»åŠ¡å¹¶è¡Œè¢« <code>fork</code> æ‰§è¡Œã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  fork<span class="token punctuation">,</span>
  take
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux-saga/effects&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">takeEvery</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">pattern<span class="token punctuation">,</span> saga<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fork</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">take</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span>
    <span class="token keyword">yield</span> <span class="token function">fork</span><span class="token punctuation">(</span>saga<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><strong><code>takeLatest</code></strong></li></ul> <p><code>takeLatest</code> ä¸å…è®¸å¤šä¸ª <code>saga</code> ä»»åŠ¡å¹¶è¡Œåœ°æ‰§è¡Œã€‚ä¸€æ—¦æ¥æ”¶åˆ°æ–°çš„å‘èµ·çš„ <code>action</code>ï¼Œå®ƒå°±ä¼šå–æ¶ˆå‰é¢æ‰€æœ‰ <code>fork</code> è¿‡çš„ä»»åŠ¡ï¼ˆå¦‚æœè¿™äº›ä»»åŠ¡è¿˜åœ¨æ‰§è¡Œçš„è¯ï¼‰ã€‚ åœ¨å¤„ç† <code>AJAX</code> è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœåªå¸Œæœ›è·å–æœ€åé‚£ä¸ªè¯·æ±‚çš„å“åº”ï¼Œ <code>takeLatest</code> å°±ä¼šéå¸¸æœ‰ç”¨ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  cancel<span class="token punctuation">,</span>
  fork<span class="token punctuation">,</span>
  take
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux-saga/effects&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">takeLatest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">pattern<span class="token punctuation">,</span> saga<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fork</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> lastTask
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">take</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastTask<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> <span class="token function">cancel</span><span class="token punctuation">(</span>lastTask<span class="token punctuation">)</span> <span class="token comment">// å¦‚æœä»»åŠ¡å·²ç»ç»“æŸï¼Œåˆ™ cancel ä¸ºç©ºæ“ä½œ</span>
    <span class="token punctuation">}</span>
    lastTask <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">fork</span><span class="token punctuation">(</span>saga<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="redux-çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ°-window-ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#redux-çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ°-window-ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«" class="header-anchor">#</a> <code>Redux</code> çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ° <code>window</code> ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«</h2> <p>ä¸¤è€…éƒ½æ˜¯å­˜å‚¨æ•°æ®ä»¥ä¾›åæœŸä½¿ç”¨ã€‚ä½†æ˜¯<code>Redux</code>çŠ¶æ€æ›´æ”¹å¯å›æº¯â€”â€”Time <code>travel</code>ï¼Œæ•°æ®å¤šäº†çš„æ—¶å€™å¯ä»¥å¾ˆæ¸…æ™°çš„çŸ¥é“æ”¹åŠ¨åœ¨å“ªé‡Œå‘ç”Ÿï¼Œå®Œæ•´çš„æä¾›äº†ä¸€å¥—çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚</p> <p>éšç€ <code>JavaScript</code> å•é¡µåº”ç”¨å¼€å‘æ—¥è¶‹å¤æ‚ï¼Œ<code>JavaScript</code> éœ€è¦ç®¡ç†æ¯”ä»»ä½•æ—¶å€™éƒ½è¦å¤šçš„ <code>state</code>ï¼ˆçŠ¶æ€ï¼‰ã€‚ è¿™äº› <code>state</code> å¯èƒ½åŒ…æ‹¬æœåŠ¡å™¨å“åº”ã€ç¼“å­˜æ•°æ®ã€æœ¬åœ°ç”Ÿæˆå°šæœªæŒä¹…åŒ–åˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼Œä¹ŸåŒ…æ‹¬ <code>UI</code> çŠ¶æ€ï¼Œå¦‚æ¿€æ´»çš„è·¯ç”±ï¼Œè¢«é€‰ä¸­çš„æ ‡ç­¾ï¼Œæ˜¯å¦æ˜¾ç¤ºåŠ è½½åŠ¨æ•ˆæˆ–è€…åˆ†é¡µå™¨ç­‰ç­‰ã€‚</p> <p>ç®¡ç†ä¸æ–­å˜åŒ–çš„ <code>state</code> éå¸¸å›°éš¾ã€‚å¦‚æœä¸€ä¸ª <code>model</code> çš„å˜åŒ–ä¼šå¼•èµ·å¦ä¸€ä¸ª <code>model</code> å˜åŒ–ï¼Œé‚£ä¹ˆå½“ <code>view</code> å˜åŒ–æ—¶ï¼Œå°±å¯èƒ½å¼•èµ·å¯¹åº” <code>model</code> ä»¥åŠå¦ä¸€ä¸ª<code>model</code> çš„å˜åŒ–ï¼Œä¾æ¬¡åœ°ï¼Œå¯èƒ½ä¼šå¼•èµ·å¦ä¸€ä¸ª <code>view</code> çš„å˜åŒ–ã€‚ç›´è‡³ä½ æä¸æ¸…æ¥šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p> <p><code>state</code> åœ¨ä»€ä¹ˆæ—¶å€™ï¼Œç”±äºä»€ä¹ˆåŸå› ï¼Œå¦‚ä½•å˜åŒ–å·²ç„¶ä¸å—æ§åˆ¶ã€‚ å½“ç³»ç»Ÿå˜å¾—é”™ç»¼å¤æ‚çš„æ—¶å€™ï¼Œæƒ³é‡ç°é—®é¢˜æˆ–è€…æ·»åŠ æ–°åŠŸèƒ½å°±ä¼šå˜å¾—ä¸¾æ­¥ç»´è‰°ã€‚ å¦‚æœè¿™è¿˜ä¸å¤Ÿç³Ÿç³•ï¼Œè€ƒè™‘ä¸€äº›æ¥è‡ªå‰ç«¯å¼€å‘é¢†åŸŸçš„æ–°éœ€æ±‚ï¼Œå¦‚æ›´æ–°è°ƒä¼˜ã€æœåŠ¡ç«¯æ¸²æŸ“ã€è·¯ç”±è·³è½¬å‰è¯·æ±‚æ•°æ®ç­‰ç­‰ã€‚å‰ç«¯å¼€å‘è€…æ­£åœ¨ç»å—å‰æ‰€æœªæœ‰çš„å¤æ‚æ€§ï¼Œéš¾é“å°±è¿™ä¹ˆæ”¾å¼ƒäº†å—?å½“ç„¶ä¸æ˜¯ã€‚</p> <p>è¿™é‡Œçš„å¤æ‚æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šæ¥è‡ªäºï¼šæˆ‘ä»¬æ€»æ˜¯å°†ä¸¤ä¸ªéš¾ä»¥ç†æ¸…çš„æ¦‚å¿µæ··æ·†åœ¨ä¸€èµ·ï¼šå˜åŒ–å’Œå¼‚æ­¥ã€‚ å¯ä»¥ç§°å®ƒä»¬ä¸ºæ›¼å¦¥æ€å’Œå¯ä¹ã€‚å¦‚æœæŠŠäºŒè€…åˆ†å¼€ï¼Œèƒ½åšçš„å¾ˆå¥½ï¼Œä½†æ··åˆ°ä¸€èµ·ï¼Œå°±å˜å¾—ä¸€å›¢ç³Ÿã€‚ä¸€äº›åº“å¦‚ <code>React</code> è§†å›¾åœ¨è§†å›¾å±‚ç¦æ­¢å¼‚æ­¥å’Œç›´æ¥æ“ä½œ <code>DOM</code> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼Œ<code>React</code> ä¾æ—§æŠŠå¤„ç† <code>state</code> ä¸­æ•°æ®çš„é—®é¢˜ç•™ç»™äº†ä½ ã€‚<code>Redux</code>å°±æ˜¯ä¸ºäº†å¸®ä½ è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p> <h2 id="mobx-å’Œ-redux-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#mobx-å’Œ-redux-æœ‰ä»€ä¹ˆåŒºåˆ«" class="header-anchor">#</a> <code>mobx</code> å’Œ <code>redux</code> æœ‰ä»€ä¹ˆåŒºåˆ«</h2> <p><strong>å…±åŒç‚¹</strong></p> <ul><li>ä¸ºäº†è§£å†³çŠ¶æ€ç®¡ç†æ··ä¹±ï¼Œæ— æ³•æœ‰æ•ˆåŒæ­¥çš„é—®é¢˜ç»Ÿä¸€ç»´æŠ¤ç®¡ç†åº”ç”¨çŠ¶æ€;</li> <li>æŸä¸€çŠ¶æ€åªæœ‰ä¸€ä¸ªå¯ä¿¡æ•°æ®æ¥æºï¼ˆé€šå¸¸å‘½åä¸º<code>store</code>ï¼ŒæŒ‡çŠ¶æ€å®¹å™¨ï¼‰;</li> <li>æ“ä½œæ›´æ–°çŠ¶æ€æ–¹å¼ç»Ÿä¸€ï¼Œå¹¶ä¸”å¯æ§ï¼ˆé€šå¸¸ä»¥<code>action</code>æ–¹å¼æä¾›æ›´æ–°çŠ¶æ€çš„é€”å¾„ï¼‰;</li> <li>æ”¯æŒå°†<code>store</code>ä¸<code>React</code>ç»„ä»¶è¿æ¥ï¼Œå¦‚<code>react-redux</code>ï¼Œ<code>mobx- react</code>;</li></ul> <p><strong>åŒºåˆ«:</strong><code>Redux</code>æ›´å¤šçš„æ˜¯éµå¾ª<code>Flux</code>æ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œæ˜¯ä¸€ä¸ª <code>JavaScript</code>åº“ï¼Œå®ƒå…³æ³¨ç‚¹ä¸»è¦æ˜¯ä»¥ä¸‹å‡ æ–¹é¢âˆ¶</p> <ul><li><p><code>Action</code>âˆ¶ ä¸€ä¸ª<code>JavaScript</code>å¯¹è±¡ï¼Œæè¿°åŠ¨ä½œç›¸å…³ä¿¡æ¯ï¼Œä¸»è¦åŒ…å«<code>type</code>å±æ€§å’Œ<code>payload</code>å±æ€§âˆ¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>o typeâˆ¶ action ç±»å‹; o payloadâˆ¶ è´Ÿè½½æ•°æ®;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>Reducer</code>âˆ¶ å®šä¹‰åº”ç”¨çŠ¶æ€å¦‚ä½•å“åº”ä¸åŒåŠ¨ä½œï¼ˆ<code>action</code>ï¼‰ï¼Œå¦‚ä½•æ›´æ–°çŠ¶æ€;</p></li> <li><p><code>Store</code>âˆ¶ ç®¡ç†<code>action</code>å’Œ<code>reducer</code>åŠå…¶å…³ç³»çš„å¯¹è±¡ï¼Œä¸»è¦æä¾›ä»¥ä¸‹åŠŸèƒ½âˆ¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>o ç»´æŠ¤åº”ç”¨çŠ¶æ€å¹¶æ”¯æŒè®¿é—®çŠ¶æ€(getState());
o æ”¯æŒç›‘å¬actionçš„åˆ†å‘ï¼Œæ›´æ–°çŠ¶æ€(dispatch(action)); 
o æ”¯æŒè®¢é˜…storeçš„å˜æ›´(subscribe(listener));
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>å¼‚æ­¥æµâˆ¶ ç”±äº<code>Redux</code>æ‰€æœ‰å¯¹<code>store</code>çŠ¶æ€çš„å˜æ›´ï¼Œéƒ½åº”è¯¥é€šè¿‡<code>action</code>è§¦å‘ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼ˆé€šå¸¸éƒ½æ˜¯ä¸šåŠ¡æˆ–è·å–æ•°æ®ä»»åŠ¡ï¼‰ä¹Ÿä¸ä¾‹å¤–ï¼Œè€Œä¸ºäº†ä¸å°†ä¸šåŠ¡æˆ–æ•°æ®ç›¸å…³çš„ä»»åŠ¡æ··å…¥<code>React</code>ç»„ä»¶ä¸­ï¼Œå°±éœ€è¦ä½¿ç”¨å…¶ä»–æ¡†æ¶é…åˆç®¡ç†å¼‚æ­¥ä»»åŠ¡æµç¨‹ï¼Œå¦‚<code>redux-thunk</code>ï¼Œ<code>redux-saga</code>ç­‰;</p></li></ul> <p><code>Mobx</code>æ˜¯ä¸€ä¸ªé€æ˜å‡½æ•°å“åº”å¼ç¼–ç¨‹çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒä½¿å¾—çŠ¶æ€ç®¡ç†ç®€å•å¯ä¼¸ç¼©âˆ¶</p> <ul><li><code>Action</code>âˆ¶å®šä¹‰æ”¹å˜çŠ¶æ€çš„åŠ¨ä½œå‡½æ•°ï¼ŒåŒ…æ‹¬å¦‚ä½•å˜æ›´çŠ¶æ€;</li> <li><code>Store</code>âˆ¶ é›†ä¸­ç®¡ç†æ¨¡å—çŠ¶æ€ï¼ˆ<code>State</code>ï¼‰å’ŒåŠ¨ä½œ(<code>action</code>)</li> <li><code>Derivation</code>ï¼ˆè¡ç”Ÿï¼‰âˆ¶ ä»åº”ç”¨çŠ¶æ€ä¸­æ´¾ç”Ÿè€Œå‡ºï¼Œä¸”æ²¡æœ‰ä»»ä½•å…¶ä»–å½±å“çš„æ•°æ®</li></ul> <p><strong>å¯¹æ¯”æ€»ç»“ï¼š</strong></p> <ul><li><code>redux</code>å°†æ•°æ®ä¿å­˜åœ¨å•ä¸€çš„<code>store</code>ä¸­ï¼Œ<code>mobx</code>å°†æ•°æ®ä¿å­˜åœ¨åˆ†æ•£çš„å¤šä¸ª<code>store</code>ä¸­</li> <li><code>redux</code>ä½¿ç”¨<code>plain object</code>ä¿å­˜æ•°æ®ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†å˜åŒ–åçš„æ“ä½œ;<code>mobx</code>é€‚ç”¨<code>observable</code>ä¿å­˜æ•°æ®ï¼Œæ•°æ®å˜åŒ–åè‡ªåŠ¨å¤„ç†å“åº”çš„æ“ä½œ</li> <li><code>redux</code>ä½¿ç”¨ä¸å¯å˜çŠ¶æ€ï¼Œè¿™æ„å‘³ç€çŠ¶æ€æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ç›´æ¥å»ä¿®æ”¹å®ƒï¼Œè€Œæ˜¯åº”è¯¥è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼ŒåŒæ—¶ä½¿ç”¨çº¯å‡½æ•°;<code>mobx</code>ä¸­çš„çŠ¶æ€æ˜¯å¯å˜çš„ï¼Œå¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œä¿®æ”¹</li> <li><code>mobx</code>ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œåœ¨å…¶ä¸­æœ‰å¾ˆå¤šçš„æŠ½è±¡ï¼Œ<code>mobx</code>æ›´å¤šçš„ä½¿ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€ç»´;<code>redux</code>ä¼šæ¯”è¾ƒå¤æ‚ï¼Œå› ä¸ºå…¶ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³æŒæ¡èµ·æ¥ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼ŒåŒæ—¶éœ€è¦å€ŸåŠ©ä¸€ç³»åˆ—çš„ä¸­é—´ä»¶æ¥å¤„ç†å¼‚æ­¥å’Œå‰¯ä½œç”¨</li> <li><code>mobx</code>ä¸­æœ‰æ›´å¤šçš„æŠ½è±¡å’Œå°è£…ï¼Œè°ƒè¯•ä¼šæ¯”è¾ƒå›°éš¾ï¼ŒåŒæ—¶ç»“æœä¹Ÿéš¾ä»¥é¢„æµ‹;è€Œ<code>redux</code>æä¾›èƒ½å¤Ÿè¿›è¡Œæ—¶é—´å›æº¯çš„å¼€å‘å·¥å…·ï¼ŒåŒæ—¶å…¶çº¯å‡½æ•°ä»¥åŠæ›´å°‘çš„æŠ½è±¡ï¼Œè®©è°ƒè¯•å˜å¾—æ›´åŠ çš„å®¹æ˜“</li></ul> <h2 id="redux-å’Œ-vuex-æœ‰ä»€ä¹ˆåŒºåˆ«-å®ƒä»¬çš„å…±åŒæ€æƒ³"><a href="#redux-å’Œ-vuex-æœ‰ä»€ä¹ˆåŒºåˆ«-å®ƒä»¬çš„å…±åŒæ€æƒ³" class="header-anchor">#</a> <code>Redux</code> å’Œ <code>Vuex</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬çš„å…±åŒæ€æƒ³</h2> <p><strong><code>Redux</code> å’Œ <code>Vuex</code>åŒºåˆ«</strong></p> <ul><li><code>Vuex</code>æ”¹è¿›äº†<code>Redux</code>ä¸­çš„<code>Action</code>å’Œ<code>Reducer</code>å‡½æ•°ï¼Œä»¥<code>mutations</code>å˜åŒ–å‡½æ•°å–ä»£<code>Reducer</code>ï¼Œæ— éœ€<code>switch</code>ï¼Œåªéœ€åœ¨å¯¹åº”çš„<code>mutation</code>å‡½æ•°é‡Œæ”¹å˜<code>state</code>å€¼å³å¯</li> <li><code>Vuex</code>ç”±äº<code>Vue</code>è‡ªåŠ¨é‡æ–°æ¸²æŸ“çš„ç‰¹æ€§ï¼Œæ— éœ€è®¢é˜…é‡æ–°æ¸²æŸ“å‡½æ•°ï¼Œåªè¦ç”Ÿæˆæ–°çš„<code>State</code>å³å¯</li> <li><code>Vuex</code>æ•°æ®æµçš„é¡ºåºæ˜¯âˆ¶<code>View</code>è°ƒç”¨<code>store.commit</code>æäº¤å¯¹åº”çš„è¯·æ±‚åˆ°<code>Store</code>ä¸­å¯¹åº”çš„<code>mutation</code>å‡½æ•°â†’<code>store</code>æ”¹å˜ï¼ˆ<code>vue</code>æ£€æµ‹åˆ°æ•°æ®å˜åŒ–è‡ªåŠ¨æ¸²æŸ“ï¼‰</li></ul> <p>é€šä¿—ç‚¹ç†è§£å°±æ˜¯ï¼Œ<code>vuex</code> å¼±åŒ– <code>dispatch</code>ï¼Œé€šè¿‡<code>commit</code>è¿›è¡Œ <code>store</code>çŠ¶æ€çš„ä¸€æ¬¡æ›´å˜ï¼›å–æ¶ˆäº†<code>action</code>æ¦‚å¿µï¼Œä¸å¿…ä¼ å…¥ç‰¹å®šçš„ <code>action</code>å½¢å¼è¿›è¡ŒæŒ‡å®šå˜æ›´ï¼›å¼±åŒ–<code>reducer</code>ï¼ŒåŸºäº<code>commit</code>å‚æ•°ç›´æ¥å¯¹æ•°æ®è¿›è¡Œè½¬å˜ï¼Œä½¿å¾—æ¡†æ¶æ›´åŠ ç®€æ˜“;</p> <p><strong>å…±åŒæ€æƒ³</strong></p> <ul><li>å•â€”çš„æ•°æ®æº</li> <li>å˜åŒ–å¯ä»¥é¢„æµ‹</li></ul> <p>æœ¬è´¨ä¸Šâˆ¶ <code>redux</code>ä¸<code>vuex</code>éƒ½æ˜¯å¯¹<code>mvvm</code>æ€æƒ³çš„æœåŠ¡ï¼Œå°†æ•°æ®ä»è§†å›¾ä¸­æŠ½ç¦»çš„ä¸€ç§æ–¹æ¡ˆã€‚</p> <h2 id="redux-ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store-å’Œ-action-ç„¶åæ€ä¹ˆå¤„ç†"><a href="#redux-ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store-å’Œ-action-ç„¶åæ€ä¹ˆå¤„ç†" class="header-anchor">#</a> <code>Redux</code> ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°<code>store</code> å’Œ <code>action</code>? ç„¶åæ€ä¹ˆå¤„ç†?</h2> <p><code>redux</code>ä¸­é—´ä»¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°æŸ¯é‡ŒåŒ–ã€‚</p> <p><code>redux applyMiddleware API</code> æºç ä¸­æ¯ä¸ª<code>middleware</code> æ¥å—<code>2</code>ä¸ªå‚æ•°ï¼Œ <code>Store</code> çš„<code>getState</code> å‡½æ•°å’Œ<code>dispatch</code> å‡½æ•°ï¼Œåˆ†åˆ«è·å¾—<code>store</code>å’Œ<code>action</code>ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè¢«ä¼ å…¥ <code>next</code> çš„ä¸‹ä¸€ä¸ª <code>middleware</code> çš„ <code>dispatch</code> æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ¥æ”¶ <code>action</code> çš„æ–°å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨ <code>nextï¼ˆactionï¼‰</code>ï¼Œæˆ–è€…åœ¨å…¶ä»–éœ€è¦çš„æ—¶åˆ»è°ƒç”¨ï¼Œç”šè‡³æ ¹æœ¬ä¸å»è°ƒç”¨å®ƒã€‚</p> <p>è°ƒç”¨é“¾ä¸­æœ€åä¸€ä¸ª <code>middleware</code> ä¼šæ¥å—çœŸå®çš„ <code>store</code>çš„ <code>dispatch</code> æ–¹æ³•ä½œä¸º <code>next</code> å‚æ•°ï¼Œå¹¶å€Ÿæ­¤ç»“æŸè°ƒç”¨é“¾ã€‚æ‰€ä»¥ï¼Œ<code>middleware</code> çš„å‡½æ•°ç­¾åæ˜¯<code>({ getStateï¼Œdispatch })=&gt; next =&gt; action</code>ã€‚</p> <h2 id="reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨"><a href="#reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨" class="header-anchor">#</a> <code>Redux</code>ä¸­çš„<code>connect</code>æœ‰ä»€ä¹ˆä½œç”¨</h2> <p><code>connect</code>è´Ÿè´£è¿æ¥<code>React</code>å’Œ<code>Redux</code></p> <p><strong>1. è·å–<code>state</code></strong></p> <p><code>connect</code> é€šè¿‡ <code>context</code> è·å– <code>Provider</code> ä¸­çš„ <code>store</code>ï¼Œé€šè¿‡<code>store.getState()</code> è·å–æ•´ä¸ª<code>store tree</code> ä¸Šæ‰€æœ‰<code>state</code></p> <p><strong>2. åŒ…è£…åŸç»„ä»¶</strong></p> <p>å°†<code>state</code>å’Œ<code>action</code>é€šè¿‡<code>props</code>çš„æ–¹å¼ä¼ å…¥åˆ°åŸç»„ä»¶å†…éƒ¨ <code>wrapWithConnect</code> è¿”å›â€”ä¸ª <code>ReactComponent</code> å¯¹ è±¡ <code>Connect</code>ï¼Œ<code>Connect</code> é‡æ–° <code>render</code> å¤–éƒ¨ä¼ å…¥çš„åŸç»„ä»¶ <code>WrappedComponent</code> ï¼Œå¹¶æŠŠ <code>connect</code> ä¸­ä¼ å…¥çš„ <code>mapStateToProps</code>ï¼Œ<code>mapDispatchToProps</code>ä¸ç»„ä»¶ä¸ŠåŸæœ‰çš„ <code>props</code> åˆå¹¶åï¼Œé€šè¿‡å±æ€§çš„æ–¹å¼ä¼ ç»™<code>WrappedComponent</code></p> <p><strong>3. ç›‘å¬<code>store tree</code>å˜åŒ–</strong></p> <p><code>connect</code>ç¼“å­˜äº†<code>store tree</code>ä¸­<code>state</code>çš„çŠ¶æ€ï¼Œé€šè¿‡å½“å‰<code>state</code>çŠ¶æ€ å’Œå˜æ›´å‰ <code>state</code> çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œç¡®å®šæ˜¯å¦è°ƒç”¨ <code>this.setState()</code>æ–¹æ³•è§¦å‘ <code>Connect</code> åŠå…¶å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/05/02, 12:25:10</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/000594/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">è·¯ç”±</div></a> <a href="/pages/6bcb1a/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Hooks</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/000594/" class="prev">è·¯ç”±</a></span> <span class="next"><a href="/pages/6bcb1a/">Hooks</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://github.com/duochizhacai" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://juejin.cn/user/1249486902410744" title="JueJin" target="_blank" class="iconfont icon-juejin"></a></div> 
    Copyright Â© 2021-2022
    <span><a href='https://beian.miit.gov.cn'>ç²¤ICPå¤‡2021165371å·</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.95fc12d6.js" defer></script><script src="/assets/js/2.abf57e2f.js" defer></script><script src="/assets/js/48.8d4e8a09.js" defer></script>
  </body>
</html>
