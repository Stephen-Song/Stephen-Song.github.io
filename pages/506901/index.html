<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ¸²æŸ“åä¸‡æ¡æ•°æ® | å°å®‹çˆ±ç¡è§‰</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="ğŸš€ä¸€ä¸ªå‰ç«¯ç¨‹åºå‘˜å°ç™½çš„åšå®¢ğŸŒ¹">
    <meta name="keywords" content="blog,crucials,frontend,å‰ç«¯,å°å®‹çˆ±ç¡è§‰,åšå®¢,duochizhacai">
    <meta name="theme-color" content="#60ad81">
    
    <link rel="preload" href="/assets/css/0.styles.65787d8c.css" as="style"><link rel="preload" href="/assets/js/app.95fc12d6.js" as="script"><link rel="preload" href="/assets/js/2.abf57e2f.js" as="script"><link rel="preload" href="/assets/js/88.2cfc7001.js" as="script"><link rel="prefetch" href="/assets/js/10.9d6bb65c.js"><link rel="prefetch" href="/assets/js/11.bea1ca2d.js"><link rel="prefetch" href="/assets/js/12.a5ced6a2.js"><link rel="prefetch" href="/assets/js/13.ec1bcac6.js"><link rel="prefetch" href="/assets/js/14.4e5bcc62.js"><link rel="prefetch" href="/assets/js/15.753bb2dc.js"><link rel="prefetch" href="/assets/js/16.a6e51bcc.js"><link rel="prefetch" href="/assets/js/17.25227dca.js"><link rel="prefetch" href="/assets/js/18.19267273.js"><link rel="prefetch" href="/assets/js/19.a9403a12.js"><link rel="prefetch" href="/assets/js/20.c007e659.js"><link rel="prefetch" href="/assets/js/21.dca7af69.js"><link rel="prefetch" href="/assets/js/22.d9f25771.js"><link rel="prefetch" href="/assets/js/23.2668c7ed.js"><link rel="prefetch" href="/assets/js/24.30c858a4.js"><link rel="prefetch" href="/assets/js/25.bd21abb1.js"><link rel="prefetch" href="/assets/js/26.28d250cb.js"><link rel="prefetch" href="/assets/js/27.a60d212f.js"><link rel="prefetch" href="/assets/js/28.8a5c2c34.js"><link rel="prefetch" href="/assets/js/29.4688a5d6.js"><link rel="prefetch" href="/assets/js/3.e687237e.js"><link rel="prefetch" href="/assets/js/30.5985f3b4.js"><link rel="prefetch" href="/assets/js/31.7ee5d916.js"><link rel="prefetch" href="/assets/js/32.2f711dea.js"><link rel="prefetch" href="/assets/js/33.45a4e58a.js"><link rel="prefetch" href="/assets/js/34.6a46cad8.js"><link rel="prefetch" href="/assets/js/35.79084a19.js"><link rel="prefetch" href="/assets/js/36.9a5cf509.js"><link rel="prefetch" href="/assets/js/37.ea6b36a3.js"><link rel="prefetch" href="/assets/js/38.1ebed809.js"><link rel="prefetch" href="/assets/js/39.16200e67.js"><link rel="prefetch" href="/assets/js/4.4a0efd85.js"><link rel="prefetch" href="/assets/js/40.db1f5064.js"><link rel="prefetch" href="/assets/js/41.5c8205b4.js"><link rel="prefetch" href="/assets/js/42.d8e671a9.js"><link rel="prefetch" href="/assets/js/43.80c6d459.js"><link rel="prefetch" href="/assets/js/44.0dc33dbe.js"><link rel="prefetch" href="/assets/js/45.e623e04e.js"><link rel="prefetch" href="/assets/js/46.b9a46fc2.js"><link rel="prefetch" href="/assets/js/47.2d5eb349.js"><link rel="prefetch" href="/assets/js/48.8d4e8a09.js"><link rel="prefetch" href="/assets/js/49.f7f58461.js"><link rel="prefetch" href="/assets/js/5.84799806.js"><link rel="prefetch" href="/assets/js/50.b482896d.js"><link rel="prefetch" href="/assets/js/51.9ad2b264.js"><link rel="prefetch" href="/assets/js/52.7862671c.js"><link rel="prefetch" href="/assets/js/53.d8153804.js"><link rel="prefetch" href="/assets/js/54.0af2674d.js"><link rel="prefetch" href="/assets/js/55.597b91b8.js"><link rel="prefetch" href="/assets/js/56.46804158.js"><link rel="prefetch" href="/assets/js/57.006f6db0.js"><link rel="prefetch" href="/assets/js/58.751e40d0.js"><link rel="prefetch" href="/assets/js/59.b0ebe0e6.js"><link rel="prefetch" href="/assets/js/6.f7ec0152.js"><link rel="prefetch" href="/assets/js/60.8d675b12.js"><link rel="prefetch" href="/assets/js/61.55190a7f.js"><link rel="prefetch" href="/assets/js/62.117f5f66.js"><link rel="prefetch" href="/assets/js/63.b848bfe2.js"><link rel="prefetch" href="/assets/js/64.000227a3.js"><link rel="prefetch" href="/assets/js/65.9ec404e1.js"><link rel="prefetch" href="/assets/js/66.1834b2b1.js"><link rel="prefetch" href="/assets/js/67.bf716de8.js"><link rel="prefetch" href="/assets/js/68.6e03054c.js"><link rel="prefetch" href="/assets/js/69.c6605c56.js"><link rel="prefetch" href="/assets/js/7.40c08f02.js"><link rel="prefetch" href="/assets/js/70.30051d78.js"><link rel="prefetch" href="/assets/js/71.1fdc7d36.js"><link rel="prefetch" href="/assets/js/72.4b0ad4ad.js"><link rel="prefetch" href="/assets/js/73.e989ab6d.js"><link rel="prefetch" href="/assets/js/74.02429c23.js"><link rel="prefetch" href="/assets/js/75.8f044cef.js"><link rel="prefetch" href="/assets/js/76.7acc2de5.js"><link rel="prefetch" href="/assets/js/77.ce127400.js"><link rel="prefetch" href="/assets/js/78.deb1ae24.js"><link rel="prefetch" href="/assets/js/79.75a4c78b.js"><link rel="prefetch" href="/assets/js/8.303c64d8.js"><link rel="prefetch" href="/assets/js/80.6c258060.js"><link rel="prefetch" href="/assets/js/81.563a0c28.js"><link rel="prefetch" href="/assets/js/82.143b4caf.js"><link rel="prefetch" href="/assets/js/83.32431b7f.js"><link rel="prefetch" href="/assets/js/84.2320a5a5.js"><link rel="prefetch" href="/assets/js/85.d9a1625a.js"><link rel="prefetch" href="/assets/js/86.dc0f47f2.js"><link rel="prefetch" href="/assets/js/87.8335157f.js"><link rel="prefetch" href="/assets/js/89.6bc590c2.js"><link rel="prefetch" href="/assets/js/9.7ba1b2de.js"><link rel="prefetch" href="/assets/js/90.c20801a7.js"><link rel="prefetch" href="/assets/js/91.1a32fafc.js"><link rel="prefetch" href="/assets/js/92.4a802465.js">
    <link rel="stylesheet" href="/assets/css/0.styles.65787d8c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/logo.png" alt="å°å®‹çˆ±ç¡è§‰" class="logo"> <span class="site-name can-hide">å°å®‹çˆ±ç¡è§‰</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="çŸ¥è¯†åº“" class="dropdown-title"><a href="/pages/56881f/" class="link-title">çŸ¥è¯†åº“</a> <span class="title" style="display:none;">çŸ¥è¯†åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56881f/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/c0e7f0/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/787250/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/pages/f0a671/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/pages/b7238f/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/pages/2448f7/" class="nav-link">è®¡ç®—æœºç½‘ç»œ</a></li><li class="dropdown-item"><!----> <a href="/pages/b8bd46/" class="nav-link">æµè§ˆå™¨åŸç†</a></li><li class="dropdown-item"><!----> <a href="/pages/f15087/" class="nav-link">æ€§èƒ½ä¼˜åŒ–</a></li><li class="dropdown-item"><!----> <a href="/pages/e3cba5/" class="nav-link">è®¾è®¡æ¨¡å¼</a></li></ul></div></div><div class="nav-item"><a href="/pages/ba01c4/" class="nav-link">æ‰‹å†™ç³»åˆ—</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç®—æ³•" class="dropdown-title"><a href="/pages/ad5191/" class="link-title">ç®—æ³•</a> <span class="title" style="display:none;">ç®—æ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8ac126/" class="nav-link">å­—ç¬¦ä¸²</a></li><li class="dropdown-item"><!----> <a href="/pages/251490/" class="nav-link">æ•°ç»„</a></li><li class="dropdown-item"><!----> <a href="/pages/fc9745/" class="nav-link">é“¾è¡¨</a></li><li class="dropdown-item"><!----> <a href="/pages/ad5191/" class="nav-link">æ ‘</a></li><li class="dropdown-item"><!----> <a href="/pages/6aee18/" class="nav-link">åŠ¨æ€è§„åˆ’</a></li><li class="dropdown-item"><!----> <a href="/pages/78e948/" class="nav-link">æ’åºç®—æ³•</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><a href="/pages/506901/https://github.com/duochizhacai" class="link-title">GitHub</a> <span class="title" style="display:none;">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/duochizhacai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1249486902410744" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JueJin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="çŸ¥è¯†åº“" class="dropdown-title"><a href="/pages/56881f/" class="link-title">çŸ¥è¯†åº“</a> <span class="title" style="display:none;">çŸ¥è¯†åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/56881f/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/c0e7f0/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/787250/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/pages/f0a671/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/pages/b7238f/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/pages/2448f7/" class="nav-link">è®¡ç®—æœºç½‘ç»œ</a></li><li class="dropdown-item"><!----> <a href="/pages/b8bd46/" class="nav-link">æµè§ˆå™¨åŸç†</a></li><li class="dropdown-item"><!----> <a href="/pages/f15087/" class="nav-link">æ€§èƒ½ä¼˜åŒ–</a></li><li class="dropdown-item"><!----> <a href="/pages/e3cba5/" class="nav-link">è®¾è®¡æ¨¡å¼</a></li></ul></div></div><div class="nav-item"><a href="/pages/ba01c4/" class="nav-link">æ‰‹å†™ç³»åˆ—</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç®—æ³•" class="dropdown-title"><a href="/pages/ad5191/" class="link-title">ç®—æ³•</a> <span class="title" style="display:none;">ç®—æ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8ac126/" class="nav-link">å­—ç¬¦ä¸²</a></li><li class="dropdown-item"><!----> <a href="/pages/251490/" class="nav-link">æ•°ç»„</a></li><li class="dropdown-item"><!----> <a href="/pages/fc9745/" class="nav-link">é“¾è¡¨</a></li><li class="dropdown-item"><!----> <a href="/pages/ad5191/" class="nav-link">æ ‘</a></li><li class="dropdown-item"><!----> <a href="/pages/6aee18/" class="nav-link">åŠ¨æ€è§„åˆ’</a></li><li class="dropdown-item"><!----> <a href="/pages/78e948/" class="nav-link">æ’åºç®—æ³•</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><a href="/pages/506901/https://github.com/duochizhacai" class="link-title">GitHub</a> <span class="title" style="display:none;">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/duochizhacai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1249486902410744" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JueJin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/pages/1a0082/" class="sidebar-link">å›¾ç‰‡å‹ç¼©</a></li><li><a href="/pages/266000/" class="sidebar-link">å›¾ç‰‡æ‡’åŠ è½½</a></li><li><a href="/pages/506901/" aria-current="page" class="active sidebar-link">æ¸²æŸ“åä¸‡æ¡æ•°æ®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/506901/#ä½¿ç”¨requestanimationframe" class="sidebar-link">ä½¿ç”¨requestAnimationFrame</a></li><li class="sidebar-sub-header"><a href="/pages/506901/#ä½¿ç”¨documentfragment" class="sidebar-link">ä½¿ç”¨documentFragment</a></li><li class="sidebar-sub-header"><a href="/pages/506901/#è™šæ‹Ÿåˆ—è¡¨" class="sidebar-link">è™šæ‹Ÿåˆ—è¡¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/506901/#é—®é¢˜-æ¯ä¸€æ¡æ•°æ®é«˜åº¦ä¸åŒ" class="sidebar-link">é—®é¢˜:æ¯ä¸€æ¡æ•°æ®é«˜åº¦ä¸åŒ</a></li></ul></li></ul></li><li><a href="/pages/3d37e9/" class="sidebar-link">å¦‚æœè®©ä½ æ¥è®¾è®¡ç½‘ç»œ</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><span data-v-1cd794fe>articles</span></li> <!----> <!----></ul> <div class="info" data-v-1cd794fe><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/duochizhacai" target="_blank" title="ä½œè€…" class="beLink" data-v-1cd794fe>Crucials</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2022-02-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          æ¸²æŸ“åä¸‡æ¡æ•°æ®
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="æ¸²æŸ“åä¸‡æ¡æ•°æ®"><a href="#æ¸²æŸ“åä¸‡æ¡æ•°æ®" class="header-anchor">#</a> æ¸²æŸ“åä¸‡æ¡æ•°æ®</h1> <h2 id="ä½¿ç”¨requestanimationframe"><a href="#ä½¿ç”¨requestanimationframe" class="header-anchor">#</a> ä½¿ç”¨<code>requestAnimationFrame</code></h2> <p><code>requestAnimationFrame</code>æœ€å¤§çš„ä¼˜åŠ¿æ˜¯ç”±ç³»ç»Ÿæ¥å†³å®šå›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœº</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//éœ€è¦æ’å…¥çš„å®¹å™¨</span>
<span class="token keyword">let</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ’å…¥åä¸‡æ¡æ•°æ®</span>
<span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">100000</span><span class="token punctuation">;</span>
<span class="token comment">// ä¸€æ¬¡æ’å…¥ 20 æ¡</span>
<span class="token keyword">let</span> once <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token comment">//æ€»é¡µæ•°</span>
<span class="token keyword">let</span> page <span class="token operator">=</span> total <span class="token operator">/</span> once<span class="token punctuation">;</span>
<span class="token comment">//æ¯æ¡è®°å½•çš„ç´¢å¼•</span>
<span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">//å¾ªç¯åŠ è½½æ•°æ®</span>
<span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token parameter">curTotal<span class="token punctuation">,</span> curIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>curTotal <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//æ¯é¡µå¤šå°‘æ¡</span>
  <span class="token keyword">let</span> pageCount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>curTotal<span class="token punctuation">,</span> once<span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pageCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      li<span class="token punctuation">.</span>innerText <span class="token operator">=</span> curIndex <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>
      ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">loop</span><span class="token punctuation">(</span>curTotal <span class="token operator">-</span> pageCount<span class="token punctuation">,</span> curIndex <span class="token operator">+</span> pageCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">loop</span><span class="token punctuation">(</span>total<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="ä½¿ç”¨documentfragment"><a href="#ä½¿ç”¨documentfragment" class="header-anchor">#</a> ä½¿ç”¨<code>documentFragment</code></h2> <div class="custom-block theorem"><p class="title">æ¦‚å¿µ</p><p><code>DocumentFragment</code>ï¼Œæ–‡æ¡£ç‰‡æ®µæ¥å£ï¼Œè¡¨ç¤ºä¸€ä¸ªæ²¡æœ‰çˆ¶çº§æ–‡ä»¶çš„æœ€å°æ–‡æ¡£å¯¹è±¡ã€‚</p> <p>å®ƒè¢«ä½œä¸ºä¸€ä¸ªè½»é‡ç‰ˆçš„<code>Document</code>ä½¿ç”¨ï¼Œç”¨äºå­˜å‚¨å·²æ’å¥½ç‰ˆçš„æˆ–å°šæœªæ‰“ç†å¥½æ ¼å¼çš„<code>XML</code>ç‰‡æ®µã€‚æœ€å¤§çš„åŒºåˆ«æ˜¯å› ä¸º<code>DocumentFragment</code>ä¸æ˜¯çœŸå®<code>DOM</code>æ ‘çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šè§¦å‘<code>DOM</code>æ ‘çš„ï¼ˆé‡æ–°æ¸²æŸ“) ï¼Œä¸”ä¸ä¼šå¯¼è‡´æ€§èƒ½ç­‰é—®é¢˜ã€‚
å¯ä»¥ä½¿ç”¨<code>document.createDocumentFragment</code>æ–¹æ³•æˆ–è€…æ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªç©ºçš„<code>DocumentFragment</code></p></div><p>æˆ‘ä»¬å¾—çŸ¥<code>DocumentFragments</code>æ˜¯<code>DOM</code>èŠ‚ç‚¹ï¼Œä½†å¹¶ä¸æ˜¯<code>DOM</code>æ ‘çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥å°†å­å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£ç‰‡æ®µæ—¶ä¸ä¼šå¼•èµ·é¡µé¢å›æµã€‚</p> <p>å½“<code>append</code>å…ƒç´ åˆ°<code>document</code>ä¸­æ—¶ï¼Œè¢«<code>append</code>è¿›å»çš„å…ƒç´ çš„æ ·å¼è¡¨çš„è®¡ç®—æ˜¯åŒæ­¥å‘ç”Ÿçš„ï¼Œæ­¤æ—¶è°ƒç”¨ <code>getComputedStyle</code> å¯ä»¥å¾—åˆ°æ ·å¼çš„è®¡ç®—å€¼ã€‚</p> <p>è€Œ<code>append</code>å…ƒç´ åˆ°<code>documentFragment</code> ä¸­æ—¶ï¼Œæ˜¯ä¸ä¼šè®¡ç®—å…ƒç´ çš„æ ·å¼è¡¨ï¼Œæ‰€ä»¥<code>documentFragment</code> æ€§èƒ½æ›´ä¼˜ã€‚å½“ç„¶ç°åœ¨æµè§ˆå™¨çš„ä¼˜åŒ–å·²ç»åšçš„å¾ˆå¥½äº†ï¼Œ å½“<code>append</code>å…ƒç´ åˆ°<code>document</code>ä¸­åï¼Œæ²¡æœ‰è®¿é—® <code>getComputedStyle</code> ä¹‹ç±»çš„æ–¹æ³•æ—¶ï¼Œç°ä»£æµè§ˆå™¨ä¹Ÿå¯ä»¥æŠŠæ ·å¼è¡¨çš„è®¡ç®—æ¨è¿Ÿåˆ°è„šæœ¬æ‰§è¡Œä¹‹åã€‚</p> <h2 id="è™šæ‹Ÿåˆ—è¡¨"><a href="#è™šæ‹Ÿåˆ—è¡¨" class="header-anchor">#</a> è™šæ‹Ÿåˆ—è¡¨</h2> <p>å½“æˆ‘ä»¬ä½¿ç”¨æš´åŠ›æ’å…¥<code>dom</code>èŠ‚ç‚¹çš„æ—¶å€™</p> <p><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/202202152215623.png" alt=""></p> <p>ä»<code>Performance</code>å¯ä»¥çœ‹å‡ºï¼Œä»£ç ä»æ‰§è¡Œåˆ°æ¸²æŸ“ç»“æŸï¼Œå…±æ¶ˆè€—äº†<code>960.8ms</code>,å…¶ä¸­çš„ä¸»è¦æ—¶é—´æ¶ˆè€—å¦‚ä¸‹ï¼š</p> <ul><li><code>Event(click)</code> : <code>40.84ms</code></li> <li><code>Recalculate Style</code> : <code>105.08ms</code></li> <li><code>Layout</code>: <code>731.56ms</code></li> <li><code>Update Layer Tree</code> : <code>58.87ms</code></li> <li><code>Paint</code> : <code>15.32ms</code></li></ul> <p>ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬çš„ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¶ˆè€—æ—¶é—´æœ€å¤šçš„ä¸¤ä¸ªé˜¶æ®µæ˜¯<code>Recalculate Style</code>å’Œ<code>Layout</code>ã€‚</p> <ul><li><code>Recalculate Style</code>ï¼šæ ·å¼è®¡ç®—ï¼Œæµè§ˆå™¨æ ¹æ®cssé€‰æ‹©å™¨è®¡ç®—å“ªäº›å…ƒç´ åº”è¯¥åº”ç”¨å“ªäº›è§„åˆ™ï¼Œç¡®å®šæ¯ä¸ªå…ƒç´ å…·ä½“çš„æ ·å¼ã€‚</li> <li><code>Layout</code>ï¼šå¸ƒå±€ï¼ŒçŸ¥é“å…ƒç´ åº”ç”¨å“ªäº›è§„åˆ™ä¹‹åï¼Œæµè§ˆå™¨å¼€å§‹è®¡ç®—å®ƒè¦å æ®çš„ç©ºé—´å¤§å°åŠå…¶åœ¨å±å¹•çš„ä½ç½®ã€‚</li></ul> <p>åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œåˆ—è¡¨é¡¹å¿…ç„¶ä¸ä¼šåƒä¾‹å­ä¸­ä»…ä»…åªç”±ä¸€ä¸ªliæ ‡ç­¾ç»„æˆï¼Œå¿…ç„¶æ˜¯ç”±å¤æ‚DOMèŠ‚ç‚¹ç»„æˆçš„ã€‚</p> <p>é‚£ä¹ˆå¯ä»¥æƒ³è±¡çš„æ˜¯ï¼Œå½“åˆ—è¡¨é¡¹æ•°è¿‡å¤šå¹¶ä¸”åˆ—è¡¨é¡¹ç»“æ„å¤æ‚çš„æ—¶å€™ï¼ŒåŒæ—¶æ¸²æŸ“æ—¶ï¼Œä¼šåœ¨<code>Recalculate Style</code>å’Œ<code>Layout</code>é˜¶æ®µæ¶ˆè€—å¤§é‡çš„æ—¶é—´ã€‚</p> <p>è€Œ<code>è™šæ‹Ÿåˆ—è¡¨</code>å°±æ˜¯è§£å†³è¿™ä¸€é—®é¢˜çš„ä¸€ç§å®ç°ã€‚</p> <p><code>è™šæ‹Ÿåˆ—è¡¨</code>å…¶å®æ˜¯æŒ‰éœ€æ˜¾ç¤ºçš„ä¸€ç§å®ç°ï¼Œå³åªå¯¹<code>å¯è§åŒºåŸŸ</code>è¿›è¡Œæ¸²æŸ“ï¼Œå¯¹<code>éå¯è§åŒºåŸŸ</code>ä¸­çš„æ•°æ®ä¸æ¸²æŸ“æˆ–éƒ¨åˆ†æ¸²æŸ“çš„æŠ€æœ¯ï¼Œä»è€Œè¾¾åˆ°æé«˜çš„æ¸²æŸ“æ€§èƒ½ã€‚</p> <p>å‡è®¾æœ‰<code>10000</code>æ¡è®°å½•éœ€è¦åŒæ—¶æ¸²æŸ“ï¼Œæˆ‘ä»¬å±å¹•çš„<code>å¯è§åŒºåŸŸ</code>çš„é«˜åº¦ä¸º<code>500px</code>,è€Œåˆ—è¡¨é¡¹çš„é«˜åº¦ä¸º<code>50px</code>ï¼Œåˆ™æ­¤æ—¶æˆ‘ä»¬åœ¨å±å¹•ä¸­æœ€å¤šåªèƒ½çœ‹åˆ°<code>10</code>ä¸ªåˆ—è¡¨é¡¹ï¼Œé‚£ä¹ˆåœ¨é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€åŠ è½½<code>10</code>æ¡å³å¯ã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/202202152217225.png" alt=""></p> <p>è¯´å®Œé¦–æ¬¡åŠ è½½ï¼Œå†åˆ†æä¸€ä¸‹å½“æ»šåŠ¨å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®—å½“å‰æ»šåŠ¨å€¼å¾—çŸ¥æ­¤æ—¶åœ¨å±å¹•<code>å¯è§åŒºåŸŸ</code>åº”è¯¥æ˜¾ç¤ºçš„åˆ—è¡¨é¡¹ã€‚</p> <p>å‡è®¾æ»šåŠ¨å‘ç”Ÿï¼Œæ»šåŠ¨æ¡è·é¡¶éƒ¨çš„ä½ç½®ä¸º<code>150px</code>,åˆ™æˆ‘ä»¬å¯å¾—çŸ¥åœ¨<code>å¯è§åŒºåŸŸ</code>å†…çš„åˆ—è¡¨é¡¹ä¸ºç¬¬<code>4</code>é¡¹è‡³ç¬¬<code>13</code>é¡¹ã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/202202152218455.png" alt=""></p> <p><strong>å®ç°</strong></p> <p>è™šæ‹Ÿåˆ—è¡¨çš„å®ç°ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨é¦–å±åŠ è½½çš„æ—¶å€™ï¼ŒåªåŠ è½½<code>å¯è§†åŒºåŸŸ</code>å†…éœ€è¦çš„åˆ—è¡¨é¡¹ï¼Œå½“æ»šåŠ¨å‘ç”Ÿæ—¶ï¼ŒåŠ¨æ€é€šè¿‡è®¡ç®—è·å¾—<code>å¯è§†åŒºåŸŸ</code>å†…çš„åˆ—è¡¨é¡¹ï¼Œå¹¶å°†<code>éå¯è§†åŒºåŸŸ</code>å†…å­˜åœ¨çš„åˆ—è¡¨é¡¹åˆ é™¤ã€‚</p> <ul><li>è®¡ç®—å½“å‰<code>å¯è§†åŒºåŸŸ</code>èµ·å§‹æ•°æ®ç´¢å¼•(<code>startIndex</code>)</li> <li>è®¡ç®—å½“å‰<code>å¯è§†åŒºåŸŸ</code>ç»“æŸæ•°æ®ç´¢å¼•(<code>endIndex</code>)</li> <li>è®¡ç®—å½“å‰<code>å¯è§†åŒºåŸŸçš„</code>æ•°æ®ï¼Œå¹¶æ¸²æŸ“åˆ°é¡µé¢ä¸­</li> <li>è®¡ç®—<code>startIndex</code>å¯¹åº”çš„æ•°æ®åœ¨æ•´ä¸ªåˆ—è¡¨ä¸­çš„åç§»ä½ç½®<code>startOffset</code>å¹¶è®¾ç½®åˆ°åˆ—è¡¨ä¸Š</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/202202152222190.awebp" alt="img"></p> <p>ç”±äºåªæ˜¯å¯¹<code>å¯è§†åŒºåŸŸ</code>å†…çš„åˆ—è¡¨é¡¹è¿›è¡Œæ¸²æŸ“ï¼Œæ‰€ä»¥ä¸ºäº†ä¿æŒåˆ—è¡¨å®¹å™¨çš„é«˜åº¦å¹¶å¯æ­£å¸¸çš„è§¦å‘æ»šåŠ¨ï¼Œå°†<code>html</code>ç»“æ„è®¾è®¡æˆå¦‚ä¸‹ç»“æ„ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;infinite-list-container&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;infinite-list-phantom&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;infinite-list&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> item<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> item<span class="token operator">-</span><span class="token number">2</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">...</span><span class="token operator">...</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> item<span class="token operator">-</span>n <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>infinite-list-container</code> ä¸ºå¯è§†åŒºåŸŸçš„å®¹å™¨</li> <li><code>infinite-list-phantom</code> ä¸ºå®¹å™¨å†…çš„å ä½ï¼Œé«˜åº¦ä¸ºæ€»åˆ—è¡¨é«˜åº¦ï¼Œç”¨äºå½¢æˆæ»šåŠ¨æ¡</li> <li><code>infinite-list</code> ä¸ºåˆ—è¡¨é¡¹çš„æ¸²æŸ“åŒºåŸŸ</li></ul> <p>æ¥ç€ï¼Œç›‘å¬<code>infinite-list-container</code>çš„<code>scroll</code>äº‹ä»¶ï¼Œè·å–æ»šåŠ¨ä½ç½®<code>scrollTop</code></p> <ul><li>å‡å®š<code>å¯è§†åŒºåŸŸ</code>é«˜åº¦å›ºå®šï¼Œç§°ä¹‹ä¸º<code>screenHeight</code></li> <li>å‡å®š<code>åˆ—è¡¨æ¯é¡¹</code>é«˜åº¦å›ºå®šï¼Œç§°ä¹‹ä¸º<code>itemSize</code></li> <li>å‡å®š<code>åˆ—è¡¨æ•°æ®</code>ç§°ä¹‹ä¸º<code>listData</code></li> <li>å‡å®š<code>å½“å‰æ»šåŠ¨ä½ç½®</code>ç§°ä¹‹ä¸º<code>scrollTop</code></li></ul> <p>åˆ™å¯æ¨ç®—å‡ºï¼š</p> <ul><li>åˆ—è¡¨æ€»é«˜åº¦<code>listHeight</code> = <code>listData.length * itemSize</code></li> <li>å¯æ˜¾ç¤ºçš„åˆ—è¡¨é¡¹æ•°<code>visibleCount</code> = <code>Math.ceil(screenHeight / itemSize)</code></li> <li>æ•°æ®çš„èµ·å§‹ç´¢å¼•<code>startIndex</code> = <code>Math.floor(scrollTop / itemSize)</code></li> <li>æ•°æ®çš„ç»“æŸç´¢å¼•<code>endIndex</code> = <code>startIndex + visibleCount</code></li> <li>åˆ—è¡¨æ˜¾ç¤ºæ•°æ®ä¸º<code>visibleData</code> = <code>listData.slice(startIndex,endIndex)</code></li></ul> <p>å½“æ»šåŠ¨åï¼Œç”±äº<code>æ¸²æŸ“åŒºåŸŸ</code>ç›¸å¯¹äº<code>å¯è§†åŒºåŸŸ</code>å·²ç»å‘ç”Ÿäº†åç§»ï¼Œæ­¤æ—¶æˆ‘éœ€è¦è·å–ä¸€ä¸ªåç§»é‡<code>startOffset</code>ï¼Œé€šè¿‡æ ·å¼æ§åˆ¶å°†<code>æ¸²æŸ“åŒºåŸŸ</code>åç§»è‡³<code>å¯è§†åŒºåŸŸ</code>ä¸­ã€‚</p> <ul><li>åç§»é‡<code>startOffset</code> = <code>scrollTop - (scrollTop % itemSize)</code></li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>infinite-list-container<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@scroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scrollEvent($event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>infinite-list-phantom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ height: listHeight + <span class="token punctuation">'</span>px<span class="token punctuation">'</span> }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>infinite-list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ transform: getTransform }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>infinite-list-item<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in visibleData<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ height: itemSize + <span class="token punctuation">'</span>px<span class="token punctuation">'</span>,lineHeight: itemSize + <span class="token punctuation">'</span>px<span class="token punctuation">'</span> }<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>{{ item.value }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

export default {
  name:'VirtualList',
  props: {
    //æ‰€æœ‰åˆ—è¡¨æ•°æ®
    listData:{
      type:Array,
      default:()=&gt;[]
    },
    //æ¯é¡¹é«˜åº¦
    itemSize: {
      type: Number,
      default:200
    }
  },
  data() {
    return {
      //å¯è§†åŒºåŸŸé«˜åº¦
      screenHeight:0,
      //åç§»é‡
      startOffset:0,
      //èµ·å§‹ç´¢å¼•
      start:0,
      //ç»“æŸç´¢å¼•
      end:null,
    };
  },
  computed:{
    //åˆ—è¡¨æ€»é«˜åº¦
    listHeight(){
      return this.listData.length * this.itemSize;
    },
    //å¯æ˜¾ç¤ºçš„åˆ—è¡¨é¡¹æ•°
    visibleCount(){
      return Math.ceil(this.screenHeight / this.itemSize)
    },
    //åç§»é‡å¯¹åº”çš„style
    getTransform(){
      return `translate3d(0,${this.startOffset}px,0)`;
    },
    //è·å–çœŸå®æ˜¾ç¤ºåˆ—è¡¨æ•°æ®
    visibleData(){
      return this.listData.slice(this.start, Math.min(this.end,this.listData.length));
    }
  },
  mounted() {
    this.screenHeight = this.$el.clientHeight;
    this.start = 0;
    this.end = this.start + this.visibleCount;
  },

  methods: {
    scrollEvent() {
      //å½“å‰æ»šåŠ¨ä½ç½®
      let scrollTop = this.$refs.list.scrollTop;
      //æ­¤æ—¶çš„å¼€å§‹ç´¢å¼•
      this.start = Math.floor(scrollTop / this.itemSize);
      //æ­¤æ—¶çš„ç»“æŸç´¢å¼•
      this.end = this.start + this.visibleCount;
      //æ­¤æ—¶çš„åç§»é‡
      this.startOffset = scrollTop - (scrollTop % this.itemSize);
    }
  }
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/202202152244383.png" alt=""></p> <p><strong>é‡åˆ°çš„é—®é¢˜</strong></p> <h3 id="é—®é¢˜-æ¯ä¸€æ¡æ•°æ®é«˜åº¦ä¸åŒ"><a href="#é—®é¢˜-æ¯ä¸€æ¡æ•°æ®é«˜åº¦ä¸åŒ" class="header-anchor">#</a> é—®é¢˜:æ¯ä¸€æ¡æ•°æ®é«˜åº¦ä¸åŒ</h3> <p><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/202202152248926.png" alt=""></p> <ol><li>å¯¹ç»„ä»¶å±æ€§<code>itemSize</code>è¿›è¡Œæ‰©å±•ï¼Œæ”¯æŒä¼ é€’ç±»å‹ä¸º<code>æ•°å­—</code>ã€<code>æ•°ç»„</code>ã€<code>å‡½æ•°</code></li></ol> <ul><li>å¯ä»¥æ˜¯ä¸€ä¸ªå›ºå®šå€¼ï¼Œå¦‚ <code>100</code>ï¼Œæ­¤æ—¶åˆ—è¡¨é¡¹æ˜¯å›ºé«˜çš„</li> <li>å¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰åˆ—è¡¨é¡¹é«˜åº¦çš„æ•°æ®ï¼Œå¦‚ <code>[50, 20, 100, 80, ...]</code></li> <li>å¯ä»¥æ˜¯ä¸€ä¸ªæ ¹æ®åˆ—è¡¨é¡¹ç´¢å¼•è¿”å›å…¶é«˜åº¦çš„å‡½æ•°ï¼š<code>(index: number): number</code></li></ul> <ol start="2"><li>å°†åˆ—è¡¨é¡¹<code>æ¸²æŸ“åˆ°å±å¹•å¤–</code>ï¼Œå¯¹å…¶é«˜åº¦è¿›è¡Œæµ‹é‡å¹¶ç¼“å­˜ï¼Œç„¶åå†å°†å…¶æ¸²æŸ“è‡³å¯è§†åŒºåŸŸå†…ã€‚</li></ol> <p>ç”±äºé¢„å…ˆæ¸²æŸ“è‡³å±å¹•å¤–ï¼Œå†æ¸²æŸ“è‡³å±å¹•å†…ï¼Œè¿™å¯¼è‡´æ¸²æŸ“æˆæœ¬å¢åŠ ä¸€å€ï¼Œè¿™å¯¹äºæ•°ç™¾ä¸‡ç”¨æˆ·åœ¨ä½ç«¯ç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨çš„äº§å“æ¥è¯´æ˜¯ä¸åˆ‡å®é™…çš„ã€‚</p> <ol start="3"><li>ä»¥<code>é¢„ä¼°é«˜åº¦</code>å…ˆè¡Œæ¸²æŸ“ï¼Œç„¶åè·å–çœŸå®é«˜åº¦å¹¶ç¼“å­˜ã€‚</li></ol> <p>å®šä¹‰ç»„ä»¶å±æ€§<code>estimatedItemSize</code>,ç”¨äºæ¥æ”¶<code>é¢„ä¼°é«˜åº¦</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>props<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">//é¢„ä¼°é«˜åº¦</span>
  estimatedItemSize<span class="token operator">:</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span>Number
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å®šä¹‰<code>positions</code>ï¼Œç”¨äºåˆ—è¡¨é¡¹æ¸²æŸ“åå­˜å‚¨<code>æ¯ä¸€é¡¹çš„é«˜åº¦ä»¥åŠä½ç½®</code>ä¿¡æ¯ï¼Œ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>positions <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// {</span>
  <span class="token comment">//   top:0,</span>
  <span class="token comment">//   bottom:100,</span>
  <span class="token comment">//   height:100</span>
  <span class="token comment">// }</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¹¶åœ¨åˆå§‹æ—¶æ ¹æ®<code>estimatedItemSize</code>å¯¹<code>positions</code>è¿›è¡Œåˆå§‹åŒ–ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">initPositions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>positions <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>listData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      index<span class="token punctuation">,</span>
      height<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>estimatedItemSize<span class="token punctuation">,</span>
      top<span class="token operator">:</span>index <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>estimatedItemSize<span class="token punctuation">,</span>
      bottom<span class="token operator">:</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>estimatedItemSize
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ç”±äºåˆ—è¡¨é¡¹é«˜åº¦ä¸å®šï¼Œå¹¶ä¸”æˆ‘ä»¬ç»´æŠ¤äº†<code>positions</code>ï¼Œç”¨äºè®°å½•æ¯ä¸€é¡¹çš„ä½ç½®ï¼Œè€Œ<code>åˆ—è¡¨é«˜åº¦</code>å®é™…å°±ç­‰äºåˆ—è¡¨ä¸­æœ€åä¸€é¡¹çš„åº•éƒ¨è·ç¦»åˆ—è¡¨é¡¶éƒ¨çš„ä½ç½®ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//åˆ—è¡¨æ€»é«˜åº¦</span>
<span class="token function">listHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>bottom<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç”±äºéœ€è¦åœ¨<code>æ¸²æŸ“å®Œæˆ</code>åï¼Œè·å–åˆ—è¡¨æ¯é¡¹çš„ä½ç½®ä¿¡æ¯å¹¶ç¼“å­˜ï¼Œæ‰€ä»¥ä½¿ç”¨é’©å­å‡½æ•°<code>updated</code>æ¥å®ç°ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> nodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>items<span class="token punctuation">;</span>
  nodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> rect <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> height <span class="token operator">=</span> rect<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token operator">+</span>node<span class="token punctuation">.</span>id<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> oldHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token keyword">let</span> dValue <span class="token operator">=</span> oldHeight <span class="token operator">-</span> height<span class="token punctuation">;</span>
    <span class="token comment">//å­˜åœ¨å·®å€¼</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>dValue<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>bottom <span class="token operator">-</span> dValue<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>bottom<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>bottom <span class="token operator">-</span> dValue<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>æ»šåŠ¨åè·å–åˆ—è¡¨<code>å¼€å§‹ç´¢å¼•</code>çš„æ–¹æ³•ä¿®æ”¹ä¸ºé€šè¿‡<code>ç¼“å­˜</code>è·å–ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//è·å–åˆ—è¡¨èµ·å§‹ç´¢å¼•</span>
<span class="token function">getStartIndex</span><span class="token punctuation">(</span><span class="token parameter">scrollTop <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>bottom <span class="token operator">&gt;</span> scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> item<span class="token punctuation">.</span>index<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ç”±äºæˆ‘ä»¬çš„ç¼“å­˜æ•°æ®ï¼Œæœ¬èº«å°±æ˜¯æœ‰é¡ºåºçš„ï¼Œæ‰€ä»¥è·å–<code>å¼€å§‹ç´¢å¼•</code>çš„æ–¹æ³•å¯ä»¥è€ƒè™‘é€šè¿‡<code>äºŒåˆ†æŸ¥æ‰¾</code>çš„æ–¹å¼æ¥é™ä½æ£€ç´¢æ¬¡æ•°ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//è·å–åˆ—è¡¨èµ·å§‹ç´¢å¼•</span>
<span class="token function">getStartIndex</span><span class="token punctuation">(</span><span class="token parameter">scrollTop <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//äºŒåˆ†æ³•æŸ¥æ‰¾</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">,</span>scrollTop<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">//äºŒåˆ†æ³•æŸ¥æ‰¾</span>
<span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> end <span class="token operator">=</span> list<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> tempIndex <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>start <span class="token operator">&lt;=</span> end<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> midIndex <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>start <span class="token operator">+</span> end<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> midValue <span class="token operator">=</span> list<span class="token punctuation">[</span>midIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>bottom<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>midValue <span class="token operator">===</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> midIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>midValue <span class="token operator">&lt;</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
      start <span class="token operator">=</span> midIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>midValue <span class="token operator">&gt;</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>tempIndex <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> tempIndex <span class="token operator">&gt;</span> midIndex<span class="token punctuation">)</span><span class="token punctuation">{</span>
        tempIndex <span class="token operator">=</span> midIndex<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      end <span class="token operator">=</span> end <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> tempIndex<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>æ»šåŠ¨åå°†<code>åç§»é‡</code>çš„è·å–æ–¹å¼å˜æ›´ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">scrollEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//...çœç•¥</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>startOffset <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>positions<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>bottom
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>startOffset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>é€šè¿‡<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fmarak%2FFaker.js%2F" target="_blank" rel="noopener noreferrer">faker.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¥åˆ›å»ºä¸€äº›<code>éšæœºæ•°æ®</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> id <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> id<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    id<span class="token punctuation">,</span>
    value<span class="token operator">:</span> faker<span class="token punctuation">.</span>lorem<span class="token punctuation">.</span><span class="token function">sentences</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// é•¿æ–‡æœ¬</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fvirtuallist2-1bqk6" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹åœ¨çº¿DEMOåŠå®Œæ•´ä»£ç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š</p> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/10/29/16e151e96584b690~tplv-t2oaga2asx-watermark.awebp" alt="img"></p> <p>ä»æ¼”ç¤ºæ•ˆæœä¸Šçœ‹ï¼Œæˆ‘ä»¬å®ç°äº†åŸºäº<code>æ–‡å­—å†…å®¹åŠ¨æ€æ’‘é«˜åˆ—è¡¨é¡¹</code>æƒ…å†µä¸‹çš„<code>è™šæ‹Ÿåˆ—è¡¨</code>ï¼Œä½†æ˜¯æˆ‘ä»¬å¯èƒ½ä¼šå‘ç°ï¼Œå½“æ»šåŠ¨è¿‡å¿«æ—¶ï¼Œä¼šå‡ºç°çŸ­æš‚çš„<code>ç™½å±ç°è±¡</code>ã€‚</p> <p>ä¸ºäº†ä½¿é¡µé¢å¹³æ»‘æ»šåŠ¨ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨<code>å¯è§åŒºåŸŸ</code>çš„ä¸Šæ–¹å’Œä¸‹æ–¹æ¸²æŸ“é¢å¤–çš„é¡¹ç›®ï¼Œåœ¨æ»šåŠ¨æ—¶ç»™äºˆä¸€äº›<code>ç¼“å†²</code>ï¼Œæ‰€ä»¥å°†å±å¹•åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸï¼š</p> <ul><li>å¯è§†åŒºåŸŸä¸Šæ–¹ï¼š<code>above</code></li> <li>å¯è§†åŒºåŸŸï¼š<code>screen</code></li> <li>å¯è§†åŒºåŸŸä¸‹æ–¹ï¼š<code>below</code></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/202202152315474.awebp" alt="img"></p> <p>å®šä¹‰ç»„ä»¶å±æ€§<code>bufferScale</code>,ç”¨äºæ¥æ”¶<code>ç¼“å†²åŒºæ•°æ®</code>ä¸<code>å¯è§†åŒºæ•°æ®</code>çš„<code>æ¯”ä¾‹</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>props<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">//ç¼“å†²åŒºæ¯”ä¾‹</span>
  bufferScale<span class="token operator">:</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span>Number<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span><span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¯è§†åŒºä¸Šæ–¹æ¸²æŸ“æ¡æ•°<code>aboveCount</code>è·å–æ–¹å¼å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">aboveCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>bufferScale <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visibleCount<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¯è§†åŒºä¸‹æ–¹æ¸²æŸ“æ¡æ•°<code>belowCount</code>è·å–æ–¹å¼å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">belowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>listData<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>end<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>bufferScale <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visibleCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>çœŸå®æ¸²æŸ“æ•°æ®<code>visibleData</code>è·å–æ–¹å¼å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">visibleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>aboveCount<span class="token punctuation">;</span>
  <span class="token keyword">let</span> end <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>belowCount<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_listData<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fvirtuallist-3-i3h9v" target="_blank" rel="noopener noreferrer">ç‚¹å‡»æŸ¥çœ‹åœ¨çº¿DEMOåŠå®Œæ•´ä»£ç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š</p> <p><img src="https://cdn.jsdelivr.net/gh/duochizhacai/generatePic/img/202202152316630.awebp" alt=""></p> <p>åœ¨å‰æ–‡ä¸­æˆ‘ä»¬ä½¿ç”¨<code>ç›‘å¬scrolläº‹ä»¶</code>çš„æ–¹å¼æ¥è§¦å‘å¯è§†åŒºåŸŸä¸­æ•°æ®çš„æ›´æ–°ï¼Œå½“æ»šåŠ¨å‘ç”Ÿåï¼Œscrolläº‹ä»¶ä¼šé¢‘ç¹è§¦å‘ï¼Œå¾ˆå¤šæ—¶å€™ä¼šé€ æˆ<code>é‡å¤è®¡ç®—</code>çš„é—®é¢˜ï¼Œä»æ€§èƒ½ä¸Šæ¥è¯´æ— ç–‘å­˜åœ¨æµªè´¹çš„æƒ…å†µã€‚</p> <p>å¯ä»¥ä½¿ç”¨<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FIntersectionObserver" target="_blank" rel="noopener noreferrer">IntersectionObserver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ›¿æ¢ç›‘å¬<code>scroll</code>äº‹ä»¶ï¼Œ<code>IntersectionObserver</code>å¯ä»¥ç›‘å¬ç›®æ ‡å…ƒç´ æ˜¯å¦å‡ºç°åœ¨å¯è§†åŒºåŸŸå†…ï¼Œåœ¨ç›‘å¬çš„å›è°ƒäº‹ä»¶ä¸­æ‰§è¡Œå¯è§†åŒºåŸŸæ•°æ®çš„æ›´æ–°ï¼Œå¹¶ä¸”<code>IntersectionObserver</code>çš„ç›‘å¬å›è°ƒæ˜¯å¼‚æ­¥è§¦å‘ï¼Œä¸éšç€ç›®æ ‡å…ƒç´ çš„æ»šåŠ¨è€Œè§¦å‘ï¼Œæ€§èƒ½æ¶ˆè€—æä½</p> <p>è¿˜æ˜¯æœ‰é—ç•™é—®é¢˜</p> <p>å¦‚æœåˆ—è¡¨åŒ…å«å›¾ç‰‡ï¼Œåˆ—è¡¨é«˜åº¦ç”±å›¾ç‰‡æ’‘å¼€çš„è¯ï¼Œç”±äºå›¾ç‰‡ä¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ— æ³•ä¿è¯æ˜¯å¦å®ŒæˆåŠ è½½ï¼Œé€ æˆè®¡ç®—ä¸å‡†</p> <p>è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬èƒ½ç›‘å¬åˆ—è¡¨é¡¹çš„å¤§å°å˜åŒ–å°±èƒ½è·å–å…¶çœŸæ­£çš„é«˜åº¦äº†ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FResizeObserver" target="_blank" rel="noopener noreferrer">ResizeObserver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ¥ç›‘å¬åˆ—è¡¨é¡¹å†…å®¹åŒºåŸŸçš„é«˜åº¦æ”¹å˜ï¼Œä»è€Œå®æ—¶è·å–æ¯ä¸€åˆ—è¡¨é¡¹çš„é«˜åº¦ã€‚</p> <p>ä¸è¿‡é—æ†¾çš„æ˜¯ï¼Œåœ¨æ’°å†™æœ¬æ–‡çš„æ—¶å€™ï¼Œä»…æœ‰å°‘æ•°<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.caniuse.com%2F%23search%3DResizeObserver" target="_blank" rel="noopener noreferrer">æµè§ˆå™¨æ”¯æŒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><code>ResizeObserver</code></p> <div class="custom-block tip"><p class="custom-block-title">å‚è€ƒ</p> <p><a href="https://juejin.cn/post/6844903982742110216" target="_blank" rel="noopener noreferrer">é«˜æ€§èƒ½æ¸²æŸ“æ•°æ®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/02/19, 22:25:17</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/266000/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">å›¾ç‰‡æ‡’åŠ è½½</div></a> <a href="/pages/3d37e9/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">å¦‚æœè®©ä½ æ¥è®¾è®¡ç½‘ç»œ</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/266000/" class="prev">å›¾ç‰‡æ‡’åŠ è½½</a></span> <span class="next"><a href="/pages/3d37e9/">å¦‚æœè®©ä½ æ¥è®¾è®¡ç½‘ç»œ</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://github.com/duochizhacai" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://juejin.cn/user/1249486902410744" title="JueJin" target="_blank" class="iconfont icon-juejin"></a></div> 
    Copyright Â© 2021-2022
    <span><a href='https://beian.miit.gov.cn'>ç²¤ICPå¤‡2021165371å·</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.95fc12d6.js" defer></script><script src="/assets/js/2.abf57e2f.js" defer></script><script src="/assets/js/88.2cfc7001.js" defer></script>
  </body>
</html>
